<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="VAN_DS_SC_0310" classname="VAN_DS_SC_1540" left="0" top="0" width="803" height="490" titletext="배송예정서 직송등록" onload="form_onload">
    <Layouts>
      <Layout>
        <Static id="sta_back_bar11" taborder="394" cssclass="sta_WF_Labelbg" left="0" top="81" height="29" right="15"/>
        <Static id="sta_back_bar10" taborder="391" cssclass="sta_WF_Labelbg" left="109" top="193" right="15" height="29"/>
        <Static id="sta_back_bar00" taborder="376" cssclass="sta_WF_Labelbg" left="109" top="53" right="15" height="29"/>
        <Static id="sta_back_bar14" taborder="350" cssclass="sta_WF_Labelbg" left="69" top="456" right="15" height="29"/>
        <Static id="sta_back_bar08" taborder="74" cssclass="sta_WF_Labelbg" left="69" top="344" right="15" height="29"/>
        <Static id="sta_back_bar03" taborder="128" cssclass="sta_WF_Labelbg" left="109" top="165" right="15" height="29"/>
        <Button id="btn_save" taborder="0" text="저장" cssclass="btn_WF_CRUD" top="0" right="193" height="21" onclick="btn_save_onclick" width="41"/>
        <Div id="div_menu" taborder="1" url="common::location.xfdl" text="Div01" left="0" top="0" right="406" height="21"/>
        <Static id="sta_back_bar02" taborder="2" cssclass="sta_WF_Labelbg" left="109" top="137" right="15" height="29"/>
        <Static id="sta_title01" taborder="5" text="발주번호" cssclass="sta_WF_Label" left="0" top="81" width="110" height="29" style="font:9 Gulim;" visible="true"/>
        <Static id="sta_title04" taborder="6" text="배송예정서번호" cssclass="sta_WF_Label" left="0" top="137" width="110" height="29" style="font:9 Gulim;"/>
        <Edit id="edt_na_dvy_plash_slpno" taborder="16" readonly="false" left="113" top="141" width="155" height="21" enable="false"/>
        <Combo id="Combo00" taborder="25" text="[00] 미입력" enable="false" left="113" top="229" width="128" height="21"/>
        <Static id="sta_back_bar05" taborder="26" cssclass="sta_WF_Labelbg" top="221" right="15" height="29" left="109"/>
        <Static id="sta_pagename01" taborder="38" text="Master 정보" cssclass="sta_WF_Subtitle" left="0" top="29" width="135" height="21"/>
        <Static id="sta_pagename03" taborder="71" text="상품정보" cssclass="sta_WF_Subtitle" left="0" top="293" width="180" height="21"/>
        <Static id="sta_title13" taborder="72" text="상품코드" cssclass="sta_WF_Label" left="0" top="344" width="110" height="29" style="font:9 Gulim;"/>
        <Static id="sta_back_bar07" taborder="105" cssclass="sta_WF_Labelbg" left="0" top="316" right="15" height="29"/>
        <Static id="sta_treatment00" taborder="106" text="처리대상건수(최대100) :" left="7" top="320" width="133" height="21"/>
        <Static id="sta_grd_master_cnt" taborder="107" text="0" left="151" top="320" width="25" height="21"/>
        <Button id="btn_clear" taborder="112" text="CLEAR" left="741" top="320" width="47" height="21" enable="true" onclick="btn_clear_onclick"/>
        <Button id="btn_rowUpdate" taborder="113" text="행추가/수정" left="664" top="320" width="75" height="21" enable="true" onclick="cal_dvy_pla_dt_onchanged"/>
        <Static id="sta_treat_count02" taborder="121" text="건" left="175" top="320" width="25" height="21"/>
        <Button id="btn_init" taborder="125" text="초기화" cssclass="btn_WF_CRUD" top="0" right="236" height="21" onclick="btn_init_onclick" width="53"/>
        <Static id="sta_title05" taborder="129" text="배송요청일자" cssclass="sta_WF_Label" left="803" top="266" width="110" height="29" style="font:9 Gulim;" visible="false"/>
        <Static id="sta_title24" taborder="131" text="배송예정일자" cssclass="sta_WF_Label" left="294" top="137" width="110" height="29" style="font:9 Gulim;"/>
        <Button id="btn_pup_van_seq" taborder="136" cssclass="btn_WF_Searchbtn" left="357" top="85" width="21" height="21" onclick="btn_pup_van_seq_onclick" visible="true"/>
        <Static id="Static06" taborder="147" text="20" visible="false" left="0" top="277" width="803" height="20" style="background:#dc143c5b;"/>
        <Edit id="edt_na_wrs_c" taborder="182" cssclass="WF_Essential" enable="true" left="204" top="348" width="121" height="21" onkeydown="edt_na_wrs_c_onkeydown"/>
        <Edit id="edt_wrsnm" taborder="183" maxlength="12" cssclass="WF_Essential" enable="true" left="327" top="348" width="195" height="21" onkeydown="edt_na_wrs_c_onkeydown"/>
        <Button id="btn_popup00" taborder="185" cssclass="btn_WF_Searchbtn" left="524" top="348" width="21" height="21" onclick="btn_popup00_onclick"/>
        <Div id="div_auth" taborder="209" text="Div00" top="0" right="283" width="377" height="21" url="common::AuthorityWorkplace.xfdl"/>
        <Button id="btn_popup01" taborder="211" cssclass="btn_WF_Searchbtn" left="270" top="141" width="21" height="21" onclick="btn_popup01_onclick"/>
        <Calendar id="cal_odr_dt" taborder="222" dateformat="yyyy-MM-dd" left="113" top="85" width="98" height="21" visible="true"/>
        <Edit id="edt_odr_slpno" taborder="223" enable="false" left="214" top="85" width="140" height="21" visible="true"/>
        <Edit id="edt_dvy_rqr_dt" taborder="227" enable="false" left="916" top="270" width="178" height="21" visible="false"/>
        <Calendar id="cal_dvy_pla_dt" taborder="228" dateformat="yyyy-MM-dd" left="407" top="141" width="92" height="21" ontextchanged="cal_dvy_pla_dt_ontextchanged" onchanged="cal_dvy_pla_dt_onchanged"/>
        <Edit id="edt_na_odr_sts_dsc" taborder="230" maxlength="12" cssclass="WF_Essential" enable="false" left="597" top="169" width="167" height="21"/>
        <Static id="sta_back_bar04" taborder="233" cssclass="sta_WF_Labelbg" left="109" top="249" right="15" height="29"/>
        <Static id="sta_title10" taborder="246" text="운임보조비" cssclass="sta_WF_Label" left="294" top="193" width="110" height="29" style="font:9 Gulim;"/>
        <Static id="sta_title12" taborder="247" cssclass="sta_WF_Label" left="0" top="249" width="110" height="29" style="font:9 Gulim;" text="배송예정금액"/>
        <MaskEdit id="mae_dvy_far_astcs" taborder="250" value="0" mask="#,##0" enable="false" left="407" top="197" width="107" height="21"/>
        <MaskEdit id="mae_total_dvy_am" taborder="252" value="0" mask="#,##0" enable="false" left="113" top="253" width="88" height="21"/>
        <MaskEdit id="mae_total_dvy_vat" taborder="253" value="0" mask="#,##0" enable="false" left="203" top="253" width="88" height="21"/>
        <Static id="sta_title22" taborder="256" text="공급유형" cssclass="sta_WF_Label" left="294" top="221" width="110" height="29" style="font:9 Gulim;"/>
        <Combo id="cbo_spy_tpc" taborder="257" codecolumn="codecolumn" datacolumn="datacolumn" left="407" top="225" width="107" height="21" enable="false" onitemchanged="cbo_spy_tpc_onitemchanged">
          <Dataset id="innerdataset">
            <ColumnInfo>
              <Column id="codecolumn" size="256"/>
              <Column id="datacolumn" size="256"/>
            </ColumnInfo>
            <Rows>
              <Row>
                <Col id="codecolumn"/>
                <Col id="datacolumn"/>
              </Row>
              <Row>
                <Col id="codecolumn">01</Col>
                <Col id="datacolumn">매취</Col>
              </Row>
              <Row>
                <Col id="codecolumn">02</Col>
                <Col id="datacolumn">수탁</Col>
              </Row>
              <Row>
                <Col id="codecolumn">16</Col>
                <Col id="datacolumn">특약</Col>
              </Row>
            </Rows>
          </Dataset>
        </Combo>
        <Static id="sta_title29" taborder="266" text="배송차량및상태" cssclass="sta_WF_Label" left="294" top="165" width="110" height="29" enable="true" style="color:black;font:9 Gulim;"/>
        <Grid id="grd_master" taborder="70" useinputpanel="false" left="0" top="500" binddataset="ds_dataD" right="16" autofittype="none" enable="true" height="393">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="0"/>
                <Column size="0"/>
                <Column size="0"/>
                <Column size="0"/>
                <Column size="0"/>
                <Column size="121"/>
                <Column size="330"/>
                <Column size="80"/>
                <Column size="90"/>
                <Column size="90"/>
                <Column size="90"/>
                <Column size="90"/>
                <Column size="90"/>
                <Column size="0"/>
                <Column size="0"/>
                <Column size="0"/>
                <Column size="90"/>
              </Columns>
              <Rows>
                <Row size="30" band="head"/>
                <Row size="30" band="head"/>
                <Row size="30"/>
                <Row size="30"/>
              </Rows>
              <Band id="head">
                <Cell rowspan="2" text="순번"/>
                <Cell col="1" rowspan="2" text="발주처코드"/>
                <Cell col="2" rowspan="2" text="발주처팀코드"/>
                <Cell col="3" rowspan="2" text="발주일자"/>
                <Cell col="4" rowspan="2" text="발주전표번호"/>
                <Cell col="5" rowspan="2" text="발주상세일련번호"/>
                <Cell col="6" rowspan="2" text="상품코드"/>
                <Cell col="7" rowspan="2" text="상품명"/>
                <Cell col="8" text="규격"/>
                <Cell col="9" rowspan="2" text="BOX입수"/>
                <Cell col="10" text="수주량"/>
                <Cell col="11" text="계약단가"/>
                <Cell col="12" text="금액"/>
                <Cell col="13" text="공병단가"/>
                <Cell col="14" text="공상자단가"/>
                <Cell col="15" text="장려금율"/>
                <Cell col="16" rowspan="2" text="결품사유코드"/>
                <Cell col="17" rowspan="2" text="삭제"/>
                <Cell row="1" col="8" text="단위"/>
                <Cell row="1" col="10" text="배송예정량"/>
                <Cell row="1" col="11" text="납품단가"/>
                <Cell row="1" col="12" text="부가세"/>
                <Cell row="1" col="13" text="공병금액"/>
                <Cell row="1" col="14" text="공상자금액"/>
                <Cell row="1" col="15" text="장려금"/>
              </Band>
              <Band id="body">
                <Cell rowspan="2" text="bind:DVY_PLA_SQNO"/>
                <Cell col="1" rowspan="2" text="bind:ODRPL_NA_TRPL_C"/>
                <Cell col="2" rowspan="2" text="bind:ODRPL_NA_TEAM_C"/>
                <Cell col="3" rowspan="2" text="bind:ODR_DT"/>
                <Cell col="4" rowspan="2" text="bind:ODR_SLPNO"/>
                <Cell col="5" rowspan="2" text="bind:ODR_DSQNO"/>
                <Cell col="6" rowspan="2" style="align:center;" text="bind:NA_WRS_C"/>
                <Cell col="7" rowspan="2" style="align:left;" cssclass="Cellgrd_WF_AlignLeft" text="bind:WRSNM"/>
                <Cell col="8" text="bind:WRS_STDNM"/>
                <Cell col="9" rowspan="2" displaytype="number" style="align: ;" cssclass="Cellgrd_WF_AlignRight" text="bind:BOXPE_AQZ" mask="#,##0"/>
                <Cell col="10" displaytype="number" style="align: ;" cssclass="Cellgrd_WF_AlignRight" text="bind:ODR_QT" mask="#,##0"/>
                <Cell col="11" displaytype="number" style="align: ;" cssclass="Cellgrd_WF_AlignRight" text="bind:ODR_PCS" mask="#,##0.99"/>
                <Cell col="12" displaytype="number" style="align: ;" cssclass="Cellgrd_WF_AlignRight" text="bind:ODR_AM" mask="#,##0"/>
                <Cell col="13" style="align: ;" cssclass="Cellgrd_WF_AlignRight" text="bind:VCBT_UPR" mask="#,##0"/>
                <Cell col="14" style="align: ;" cssclass="Cellgrd_WF_AlignRight" text="bind:VCBX_UPR" mask="#,##0"/>
                <Cell col="15" style="align: ;" cssclass="Cellgrd_WF_AlignRight" text="bind:SSDYRT"/>
                <Cell col="16" rowspan="2" text="bind:DQPD_RSNC"/>
                <Cell col="17" rowspan="2" displaytype="checkbox" edittype="checkbox" text="bind:DEL_YN"/>
                <Cell row="1" col="8" text="bind:NA_WRS_UNT_C"/>
                <Cell row="1" col="10" displaytype="number" style="align: ;" cssclass="Cellgrd_WF_AlignRight" text="bind:DVY_PLA_QT" mask="#,##0"/>
                <Cell row="1" col="11" displaytype="number" style="align: ;" cssclass="Cellgrd_WF_AlignRight" text="bind:DVY_WRS_UPR" mask="#,##0.99"/>
                <Cell row="1" col="12" displaytype="number" style="align: ;" cssclass="Cellgrd_WF_AlignRight" text="bind:ODR_VAT" mask="#,##0"/>
                <Cell row="1" col="13" style="align: ;" cssclass="Cellgrd_WF_AlignRight" text="bind:VCBT_AM" mask="#,##0"/>
                <Cell row="1" col="14" style="align: ;" cssclass="Cellgrd_WF_AlignRight" text="bind:VCBX_AM" mask="#,##0"/>
                <Cell row="1" col="15" style="align: ;" cssclass="Cellgrd_WF_AlignRight" text="bind:SSDY_BAS_AM" mask="#,##0"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Button id="btn_help" taborder="293" text="도움말" cssclass="btn_WF_CRUD" top="0" right="16" width="53" height="21" onclick="btn_help_onclick"/>
        <Button id="Button22" taborder="294" text="거래명세서" cssclass="btn_WF_CRUD" top="0" height="21" right="71" width="77" onclick="Button22_onclick"/>
        <Static id="sta_title09" taborder="298" text="배송차량구분" cssclass="sta_WF_Label" left="0" top="165" width="110" height="29" style="font:9 Gulim;"/>
        <Radio id="rdo_dvy_vhc_dsc" taborder="299" index="1" codecolumn="codecolumn" datacolumn="datacolumn" value="2" direction="vertical" left="113" top="170" width="152" height="21" style="font:9 Gulim;" enable="false">
          <Dataset id="innerdataset">
            <ColumnInfo>
              <Column id="codecolumn" size="256"/>
              <Column id="datacolumn" size="256"/>
            </ColumnInfo>
            <Rows>
              <Row>
                <Col id="codecolumn">1</Col>
                <Col id="datacolumn">발주처</Col>
              </Row>
              <Row>
                <Col id="codecolumn">2</Col>
                <Col id="datacolumn">수주처</Col>
              </Row>
            </Rows>
          </Dataset>
        </Radio>
        <Edit id="edt_pre_cd_good" taborder="269" cssclass="WF_Essential" left="113" top="348" width="89" height="21" visible="true" enable="true"/>
        <Static id="sta_back_bar01" taborder="303" cssclass="sta_WF_Labelbg" left="109" top="109" right="15" height="29"/>
        <Static id="sta_title07" taborder="304" text="실발주처" cssclass="sta_WF_Label" left="0" top="109" width="110" height="29" style="font:9 Gulim;"/>
        <Edit id="edt_orpl_na_trpl_c" taborder="305" cssclass="WF_Essential" left="113" top="113" width="113" height="21" enable="true" onkeydown="edt_orpl_na_trpl_c_onkeydown"/>
        <Edit id="edt_shrt_bzplnm" taborder="306" cssclass="WF_Essential" left="229" top="113" width="235" height="21" enable="true" onkeydown="edt_shrt_bzplnm_onkeydown"/>
        <Edit id="edt_orpl_na_team_c" taborder="308" maxlength="3" cssclass="WF_Essential" enable="false" left="468" top="113" width="62" height="21"/>
        <Edit id="edt_teamnm" taborder="309" maxlength="12" cssclass="WF_Essential" enable="false" left="532" top="113" width="140" height="21"/>
        <Edit id="edt_h_is_od_be_order" taborder="321" cssclass="WF_Essential" left="803" top="150" width="123" height="21" visible="false" displaynulltext="배송예정서 작성여부"/>
        <Edit id="edt_na_odr_sts_dsc_n" taborder="322" maxlength="12" cssclass="WF_Essential" enable="false" left="517" top="169" width="78" height="21"/>
        <Combo id="cbo_vhcno" taborder="323" codecolumn="VHCNO" datacolumn="VHCNO" left="407" top="169" width="107" height="21" innerdataset="@ds_vhcno"/>
        <CheckBox id="chk_temp_yn" taborder="326" text="임시저장" value="N" truevalue="Y" falsevalue="N" left="916" top="227" width="86" height="19" style="font:9 Gulim;" visible="false"/>
        <MaskEdit id="mae_total_odr_vat" taborder="255" value="0" mask="#,##0" enable="false" left="1006" top="307" width="88" height="21" visible="false"/>
        <Static id="sta_title03" taborder="224" text="발주총액" cssclass="sta_WF_Label" left="803" top="303" width="110" height="29" style="font:9 Gulim;" visible="false"/>
        <MaskEdit id="mae_total_odr_am" taborder="254" value="0" mask="#,##0" enable="false" left="916" top="307" width="88" height="21" visible="false"/>
        <Static id="sta_back_bar06" taborder="332" cssclass="sta_WF_Labelbg" left="69" top="372" right="15" height="29"/>
        <Static id="sta_title11" taborder="333" text="규격" cssclass="sta_WF_Label" left="0" top="372" width="110" height="29" style="font:9 Gulim;"/>
        <Edit id="edt_wrs_stdnm" taborder="301" cssclass="WF_Essential" left="113" top="376" width="145" height="21" enable="false"/>
        <Static id="Static07" taborder="334" text="20" visible="false" left="109" top="401" width="154" height="20" style="background:#dc143c5b;"/>
        <Static id="sta_title00" taborder="335" text="단위" cssclass="sta_WF_Label" left="262" top="372" width="110" height="29" style="font:9 Gulim;"/>
        <Edit id="edt_na_wrs_unt_c" taborder="302" cssclass="WF_Essential" left="375" top="376" width="145" height="21" enable="false"/>
        <Static id="Static08" taborder="336" text="20" visible="false" left="371" top="401" width="154" height="20" style="background:#dc143c5b;"/>
        <Static id="sta_title18" taborder="81" text="BOX입수" cssclass="sta_WF_Label" left="524" top="372" width="110" height="29" style="font:9 Gulim;"/>
        <MaskEdit id="mae_boxpe_aqz" taborder="273" value="0" mask="#,##0" enable="false" left="637" top="376" width="145" height="21"/>
        <Static id="sta_back_bar09" taborder="338" cssclass="sta_WF_Labelbg" left="69" top="400" right="15" height="29"/>
        <Static id="sta_title16" taborder="190" text="수주량" cssclass="sta_WF_Label" left="0" top="400" width="110" height="29" style="font:9 Gulim;"/>
        <MaskEdit id="mae_odr_qt" taborder="272" value="0" mask="#,##0" enable="false" left="113" top="404" width="145" height="21"/>
        <Static id="sta_title17" taborder="193" text="배송예정량" cssclass="sta_WF_Label" left="262" top="400" width="110" height="29" style="font:9 Gulim;"/>
        <MaskEdit id="mae_dvy_pla_qt" taborder="271" value="0" mask="#,##0" enable="true" left="375" top="404" width="145" height="21" onkeyup="mae_dvy_pla_qt_onkeyup" autoselect="true"/>
        <Static id="sta_title19" taborder="194" text="계약단가" cssclass="sta_WF_Label" left="524" top="400" width="110" height="29" style="color:black;font:9 Gulim;"/>
        <MaskEdit id="mae_odr_pcs" taborder="280" value="0" mask="#,##0" enable="false" left="637" top="404" width="145" height="21"/>
        <Static id="Static02" taborder="339" text="20" visible="false" left="109" top="429" width="154" height="20" style="background:#dc143c5b;"/>
        <Static id="Static05" taborder="340" text="20" visible="false" left="371" top="429" width="154" height="20" style="background:#dc143c5b;"/>
        <Static id="sta_back_bar13" taborder="341" cssclass="sta_WF_Labelbg" left="69" top="428" right="15" height="29"/>
        <Static id="sta_title14" taborder="342" text="납품단가" cssclass="sta_WF_Label" left="0" top="428" width="110" height="29" style="font:9 Gulim;"/>
        <Static id="sta_title25" taborder="344" text="금액" cssclass="sta_WF_Label" left="262" top="428" width="110" height="29" style="font:9 Gulim;"/>
        <Static id="sta_title26" taborder="346" text="부가세" cssclass="sta_WF_Label" left="524" top="428" width="110" height="29" style="color:black;font:9 Gulim;"/>
        <MaskEdit id="mae_odr_vat" taborder="278" value="0" mask="#,##0" enable="false" left="637" top="432" width="145" height="21"/>
        <MaskEdit id="mae_odr_am" taborder="277" value="0" mask="#,##0" enable="false" left="375" top="432" width="145" height="21"/>
        <Static id="sta_title28" taborder="351" text="공급가능일자" cssclass="sta_WF_Label" left="524" top="456" width="110" height="29" style="font:9 Gulim;" visible="true"/>
        <Static id="sta_title30" taborder="352" text="결품사유" cssclass="sta_WF_Label" left="0" top="456" width="110" height="29" style="font:9 Gulim;"/>
        <Combo id="cbo_dqpd_rsnc" taborder="320" innerdataset="@ds_dqpd_rsnc_c" codecolumn="SIMP_C" datacolumn="SIMP_CNM" left="113" top="460" width="406" height="21" onitemchanged="cbo_dqpd_rsnc_onitemchanged"/>
        <MaskEdit id="mae_dvy_wrs_upr" taborder="274" mask="#,##0.99" enable="false" left="113" top="432" width="145" height="21" onkeyup="mae_dvy_pla_qt_onkeyup"/>
        <CheckBox id="chk_del_yn" taborder="207" text="삭제" enable="true" left="610" top="321" width="46" height="19" style="font:9 Gulim;" falsevalue="N" truevalue="Y" value="N" visible="false"/>
        <Static id="Static03" taborder="353" text="5" visible="false" left="-3" top="50" width="50" height="5" style="background:#dc143c5b;"/>
        <Static id="Static00" taborder="354" text="15" visible="false" left="1" top="485" width="786" height="15" style="background:#dc143c5b;"/>
        <Button id="btn_popup02" taborder="355" cssclass="btn_WF_Searchbtn" left="195" top="197" width="21" height="21" onclick="btn_popup02_onclick"/>
        <Button id="btn_popup" taborder="356" cssclass="btn_WF_Searchbtn" left="674" top="113" width="21" height="21" onclick="btn_popup_onclick"/>
        <MaskEdit id="mae_vcbt_upr" taborder="357" left="603" top="279" width="93" height="18" displaynulltext="공병단가" visible="false"/>
        <MaskEdit id="mae_vcbx_upr" taborder="358" left="695" top="279" width="93" height="18" displaynulltext="공상자단가" visible="false"/>
        <Edit id="edt_txt_dsc" taborder="359" displaynulltext="과세구분" cssclass="WF_Essential" left="486" top="279" width="118" height="18" visible="false"/>
        <Static id="sta_title02" taborder="361" text="배송처/팀" cssclass="sta_WF_Label" left="802" top="183" width="110" height="29" style="font:9 Gulim;" visible="false"/>
        <Edit id="edt_dvyaa_na_trpl_c" taborder="362" maxlength="12" cssclass="WF_Essential" enable="false" left="914" top="187" width="128" height="21" visible="false"/>
        <Edit id="edt_dvyaa_na_team_c" taborder="363" maxlength="12" cssclass="WF_Essential" enable="false" left="1044" top="187" width="20" height="21" visible="false"/>
        <Edit id="edt_pd_yy_amn_yn" taborder="364" displaynulltext="생산년도관리여부" cssclass="WF_Essential" left="369" top="279" width="118" height="18" visible="false"/>
        <Edit id="edt_pd_yy" taborder="365" displaynulltext="생산년도" cssclass="WF_Essential" left="252" top="279" width="118" height="18" visible="false"/>
        <Calendar id="cal_spy_psb_dt" taborder="366" dateformat="yyyy-MM-dd" left="637" top="460" width="145" height="21"/>
        <Static id="Static01" taborder="134" text="15" visible="false" left="788" top="-1" height="145" style="background:#dc143c5b;" width="15"/>
        <Static id="sta_title20" taborder="368" text="주관거래처" cssclass="sta_WF_Label" left="519" top="221" width="110" height="29" style="font:9 Gulim;"/>
        <Edit id="edt_mngt_na_trpl_c" taborder="369" maxlength="12" cssclass="WF_Essential" enable="false" left="631" top="225" width="104" height="21"/>
        <Edit id="edt_mngt_na_team_c" taborder="370" maxlength="12" cssclass="WF_Essential" enable="false" left="737" top="225" width="28" height="21"/>
        <Edit id="edt_mngt_na_tr_tpc" taborder="371" maxlength="12" cssclass="WF_Essential" enable="false" left="766" top="225" width="20" height="21"/>
        <Edit id="edt_cser_adjpl_na_team_c" taborder="372" maxlength="12" cssclass="WF_Essential" enable="false" left="738" top="197" width="28" height="21"/>
        <Edit id="edt_cser_adjpl_na_trpl_c" taborder="373" maxlength="12" cssclass="WF_Essential" enable="false" left="631" top="197" width="104" height="21"/>
        <Static id="sta_title21" taborder="374" text="수요자정산처" cssclass="sta_WF_Label" left="519" top="193" width="110" height="29" style="font:9 Gulim;"/>
        <Static id="sta_title27" taborder="375" text="수주처" cssclass="sta_WF_Label" left="0" top="53" width="110" height="29" style="font:9 Gulim;"/>
        <Combo id="cbo_tc" taborder="377" innerdataset="@ds_dataTC" codecolumn="NA_BZPLC" datacolumn="CLNTNM" left="113" top="57" width="417" height="21" onitemchanged="cbo_tc_onitemchanged"/>
        <Edit id="edt_tc_trpl_c" taborder="378" maxlength="12" cssclass="WF_Essential" enable="false" left="532" top="57" width="132" height="21"/>
        <Combo id="cbo_slgt_etr_dsc" taborder="379" value="1" text="매취" codecolumn="codecolumn" datacolumn="datacolumn" index="1" left="632" top="33" width="149" height="21" visible="false" onitemchanged="cbo_slgt_etr_dsc_onitemchanged">
          <Dataset id="innerdataset">
            <ColumnInfo>
              <Column id="codecolumn" size="256"/>
              <Column id="datacolumn" size="256"/>
            </ColumnInfo>
            <Rows>
              <Row>
                <Col id="codecolumn"/>
                <Col id="datacolumn">[ 선택안됨 ]</Col>
              </Row>
              <Row>
                <Col id="codecolumn">1</Col>
                <Col id="datacolumn">매취</Col>
              </Row>
              <Row>
                <Col id="codecolumn">2</Col>
                <Col id="datacolumn">수탁</Col>
              </Row>
              <Row>
                <Col id="codecolumn">3</Col>
                <Col id="datacolumn">기타</Col>
              </Row>
            </Rows>
          </Dataset>
        </Combo>
        <Static id="sta_title31" taborder="381" text="임시저장" cssclass="sta_WF_Label" left="803" top="221" width="110" height="29" style="font:9 Gulim;" visible="false"/>
        <Edit id="edt_vcbt_na_wrs_c" taborder="382" displaynulltext="공병상품코드" cssclass="WF_Essential" left="135" top="279" width="118" height="18" visible="false"/>
        <Edit id="edt_min_odr_qt" taborder="383" displaynulltext="최소발주수량" cssclass="WF_Essential" left="135" top="296" width="118" height="18" visible="false"/>
        <Static id="sta_title23" taborder="127" text="계약유형" cssclass="sta_WF_Label" left="0" top="221" width="110" height="29" style="font:9 Gulim;"/>
        <Combo id="cbo_cser_ctr_tpc" taborder="225" left="113" top="225" width="143" height="21" innerdataset="@ds_ctr_tpc" datacolumn="SIMP_CNM" codecolumn="SIMP_C" index="-1" enable="false"/>
        <Static id="sta_title06" taborder="126" text="배송지" cssclass="sta_WF_Label" left="0" top="193" width="110" height="29" style="font:9 Gulim;"/>
        <Edit id="edt_dvyaa_n" taborder="300" cssclass="WF_Essential" left="112" top="197" width="81" height="21" enable="false"/>
        <Button id="btn_cancle" taborder="386" text="취소" onclick="btn_cancle_onclick" cssclass="btn_WF_CRUD" enable="false" top="0" right="150" width="41" height="21"/>
        <Edit id="edt_ddly_st_dt" taborder="387" displaynulltext="직송시작일자" cssclass="WF_Essential" visible="false" left="252" top="296" width="118" height="18"/>
        <Edit id="edt_ddly_ed_dt" taborder="388" displaynulltext="직송마감일자" cssclass="WF_Essential" visible="false" left="369" top="296" width="118" height="18"/>
        <Edit id="edt_pgnm" taborder="389" enable="false" left="500" top="141" width="116" height="21"/>
        <Edit id="edt_vcbt_qt" taborder="392" displaynulltext="공병수량" visible="false" left="486" top="296" width="118" height="18"/>
        <Edit id="buy_upr_dsc" taborder="393" left="631" top="143" width="64" height="18" visible="false"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item0" compid="edt_orpl_na_trpl_c" propid="value" datasetid="ds_dataM" columnid="ODRPL_NA_TRPL_C"/>
      <BindItem id="item1" compid="edt_shrt_bzplnm" propid="value" datasetid="ds_dataM" columnid="SHRT_BZPLNM"/>
      <BindItem id="item2" compid="edt_orpl_na_team_c" propid="value" datasetid="ds_dataM" columnid="ODRPL_NA_TEAM_C"/>
      <BindItem id="item3" compid="edt_teamnm" propid="value" datasetid="ds_dataM" columnid="TEAMNM"/>
      <BindItem id="item4" compid="edt_dvyaa_n" propid="value" datasetid="ds_dataM" columnid="DVYAA_C"/>
      <BindItem id="item5" compid="cbo_cser_ctr_tpc" propid="value" datasetid="ds_dataM" columnid="CSER_CTR_TPC"/>
      <BindItem id="item6" compid="edt_dvy_rqr_dt" propid="value" datasetid="ds_dataM" columnid="DVY_RQR_CNTN"/>
      <BindItem id="item7" compid="rdo_dvy_vhc_dsc" propid="value" datasetid="ds_dataM" columnid="DVY_VHC_DSC"/>
      <BindItem id="item8" compid="cbo_spy_tpc" propid="value" datasetid="ds_dataM" columnid="SPY_TPC"/>
      <BindItem id="item9" compid="mae_total_odr_am" propid="value" datasetid="ds_dataM" columnid="TOTAL_ODR_AM"/>
      <BindItem id="item10" compid="mae_total_odr_vat" propid="value" datasetid="ds_dataM" columnid="TOTAL_ODR_VAT"/>
      <BindItem id="item11" compid="mae_total_dvy_am" propid="value" datasetid="ds_dataM" columnid="TOTAL_DVY_AM"/>
      <BindItem id="item12" compid="mae_total_dvy_vat" propid="value" datasetid="ds_dataM" columnid="TOTAL_DVY_VAT"/>
      <BindItem id="item13" compid="edt_h_is_od_be_order" propid="value" datasetid="ds_dataM" columnid="IS_OD_BE_ORDER"/>
      <BindItem id="item14" compid="edt_na_odr_sts_dsc" propid="value" datasetid="ds_dataM" columnid="NA_ODR_STS_DSC"/>
      <BindItem id="item15" compid="cbo_vhcno" propid="value" datasetid="ds_dataM" columnid="VHCNO"/>
      <BindItem id="item16" compid="edt_odr_slpno" propid="value" datasetid="ds_dataM" columnid="ODR_SLPNO"/>
      <BindItem id="item17" compid="cal_dvy_pla_dt" propid="value" datasetid="ds_dataM" columnid="DVY_PLA_DT"/>
      <BindItem id="item21" compid="mae_dvy_far_astcs" propid="value" datasetid="ds_dataM" columnid="DVY_FAR_ASTCS"/>
      <BindItem id="item22" compid="chk_temp_yn" propid="value" datasetid="ds_dataM" columnid="TEMP_YN"/>
      <BindItem id="item19" compid="edt_dvyaa_na_trpl_c" propid="value" datasetid="ds_dataM" columnid="DVYAA_NA_TRPL_C"/>
      <BindItem id="item20" compid="edt_dvyaa_na_team_c" propid="value" datasetid="ds_dataM" columnid="DVYAA_NA_TEAM_C"/>
      <BindItem id="item23" compid="cal_spy_psb_dt" propid="value" datasetid="ds_dataM" columnid="SPY_PSB_DT"/>
      <BindItem id="item18" compid="edt_mngt_na_trpl_c" propid="value" datasetid="ds_dataM" columnid="MNGT_NA_TRPL_C"/>
      <BindItem id="item24" compid="edt_mngt_na_team_c" propid="value" datasetid="ds_dataM" columnid="MNGT_NA_TEAM_C"/>
      <BindItem id="item25" compid="edt_mngt_na_tr_tpc" propid="value" datasetid="ds_dataM" columnid="MNGT_NA_TR_TPC"/>
      <BindItem id="item26" compid="edt_cser_adjpl_na_trpl_c" propid="value" datasetid="ds_dataM" columnid="ADJPL_NA_TRPL_C"/>
      <BindItem id="item27" compid="edt_cser_adjpl_na_team_c" propid="value" datasetid="ds_dataM" columnid="ADJPL_NA_TEAM_C"/>
      <BindItem id="item28" compid="cbo_slgt_etr_dsc" propid="value" datasetid="ds_dataM" columnid="SLGT_ETR_DSC"/>
      <BindItem id="item29" compid="cbo_tc" propid="value" datasetid="ds_dataM" columnid="RVOPL_NA_TRPL_C"/>
      <BindItem id="item30" compid="edt_tc_trpl_c" propid="value" datasetid="ds_dataM" columnid="RVOPL_NA_TRPL_C"/>
      <BindItem id="item31" compid="edt_pgnm" propid="value" datasetid="ds_dataM" columnid="PGNM"/>
      <BindItem id="item32" compid="edt_na_odr_sts_dsc_n" propid="value" datasetid="ds_dataM" columnid="DVY_PLASH_STSC_N"/>
      <BindItem id="item33" compid="buy_upr_dsc" propid="value" datasetid="ds_dataM" columnid="BUY_UPR_DSC"/>
    </Bind>
    <Objects>
      <Dataset id="ds_dataM" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ODRPL_NA_TRPL_C" type="STRING" size="256"/>
          <Column id="ODRPL_NA_TEAM_C" type="STRING" size="256"/>
          <Column id="ODR_DT" type="STRING" size="256"/>
          <Column id="ODR_SLPNO" type="STRING" size="256"/>
          <Column id="SHRT_BZPLNM" type="STRING" size="256"/>
          <Column id="TEAMNM" type="STRING" size="256"/>
          <Column id="DVYAA_C" type="STRING" size="256"/>
          <Column id="CSER_CTR_TPC" type="STRING" size="256"/>
          <Column id="DVY_RQR_CNTN" type="STRING" size="256"/>
          <Column id="DVY_VHC_DSC" type="STRING" size="256"/>
          <Column id="DVY_VHC" type="STRING" size="256"/>
          <Column id="DVY_VHC_STS" type="STRING" size="256"/>
          <Column id="TOTAL_ODR_AM" type="FLOAT" size="256"/>
          <Column id="TOTAL_ODR_VAT" type="FLOAT" size="256"/>
          <Column id="TOTAL_DVY_AM" type="FLOAT" size="256"/>
          <Column id="TOTAL_DVY_VAT" type="FLOAT" size="256"/>
          <Column id="SPY_TPC" type="STRING" size="256"/>
          <Column id="IS_OD_BE_ORDER" type="STRING" size="256"/>
          <Column id="NA_ODR_STS_DSC" type="STRING" size="256"/>
          <Column id="VHCNO" type="STRING" size="256"/>
          <Column id="DVY_PLA_DT" type="STRING" size="256"/>
          <Column id="SLGT_ETR_DSC" type="STRING" size="256"/>
          <Column id="DVY_FAR_ASTCS" type="FLOAT" size="256"/>
          <Column id="SPYPL_NA_TRPL_C" type="STRING" size="256"/>
          <Column id="SPYPL_NA_TRPL_N" type="STRING" size="256"/>
          <Column id="SPYPL_NA_TEAM_C" type="STRING" size="256"/>
          <Column id="RVOPL_NA_TRPL_C" type="STRING" size="256"/>
          <Column id="RVOPL_NA_TEAM_C" type="STRING" size="256"/>
          <Column id="DVYAA_NA_TRPL_C" type="STRING" size="256"/>
          <Column id="DVYAA_NA_TEAM_C" type="STRING" size="256"/>
          <Column id="TOTAL_VCBT_AM" type="INT" size="256"/>
          <Column id="TOTAL_VCBX_AM" type="INT" size="256"/>
          <Column id="TOTAL_DVY_SSDY" type="FLOAT" size="256"/>
          <Column id="TEMP_YN" type="STRING" size="256"/>
          <Column id="MNGT_NA_TRPL_C" type="STRING" size="256"/>
          <Column id="MNGT_NA_TEAM_C" type="STRING" size="256"/>
          <Column id="MNGT_NA_TR_TPC" type="STRING" size="256"/>
          <Column id="GRS_SOJU_YN" type="STRING" size="256"/>
          <Column id="NA_WRS_LCLC" type="STRING" size="256"/>
          <Column id="NA_WRS_MCLC" type="STRING" size="256"/>
          <Column id="ADJPL_NA_TRPL_C" type="STRING" size="256"/>
          <Column id="ADJPL_NA_TEAM_C" type="STRING" size="256"/>
          <Column id="MNGT_TR_REL_AMNNO" type="STRING" size="256"/>
          <Column id="CSER_TR_REL_AMNNO" type="STRING" size="256"/>
          <Column id="LDTM_DDS" type="STRING" size="256"/>
          <Column id="DDLY_YN" type="STRING" size="256"/>
          <Column id="DVY_PLASH_STSC_N" type="STRING" size="256"/>
          <Column id="PGNM" type="STRING" size="256"/>
          <Column id="RES_DESC" type="STRING" size="256"/>
          <Column id="BUY_UPR_DSC" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_dataD" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ODRPL_NA_TRPL_C" type="STRING" size="256"/>
          <Column id="ODRPL_NA_TEAM_C" type="STRING" size="256"/>
          <Column id="ODR_DT" type="STRING" size="256"/>
          <Column id="ODR_SLPNO" type="STRING" size="256"/>
          <Column id="ODR_DSQNO" type="STRING" size="256"/>
          <Column id="VAN_SEQ" type="STRING" size="256"/>
          <Column id="NA_WRS_C" type="STRING" size="256"/>
          <Column id="WRSNM" type="STRING" size="256"/>
          <Column id="BOXPE_AQZ" type="INT" size="256"/>
          <Column id="WRS_STDNM" type="STRING" size="256"/>
          <Column id="NA_WRS_UNT_C" type="STRING" size="256"/>
          <Column id="ODR_QT" type="INT" size="256"/>
          <Column id="ODR_PCS" type="INT" size="256"/>
          <Column id="NEW_ODR_PCS" type="INT" size="256"/>
          <Column id="ODR_VAT" type="INT" size="256"/>
          <Column id="ODR_AM" type="INT" size="256"/>
          <Column id="DEL_YN" type="STRING" size="256"/>
          <Column id="DVY_PLA_QT" type="INT" size="256"/>
          <Column id="DQPD_RSNC" type="STRING" size="256"/>
          <Column id="SPYPL_NA_TRPL_C" type="STRING" size="256"/>
          <Column id="DVYAA_NA_TRPL_C" type="STRING" size="256"/>
          <Column id="NA_DVY_PLASH_SLPNO" type="STRING" size="256"/>
          <Column id="DVY_PLA_SQNO" type="STRING" size="256"/>
          <Column id="VCBT_UPR" type="INT" size="256"/>
          <Column id="VCBX_UPR" type="INT" size="256"/>
          <Column id="VCBT_AM" type="INT" size="256"/>
          <Column id="VCBX_AM" type="INT" size="256"/>
          <Column id="SSDYRT" type="FLOAT" size="256"/>
          <Column id="SSDY_BAS_AM" type="FLOAT" size="256"/>
          <Column id="SPY_PSB_DT" type="STRING" size="256"/>
          <Column id="TXT_DSC" type="STRING" size="256"/>
          <Column id="SVS_QT" type="STRING" size="256"/>
          <Column id="NA_WRS_LCLC" type="STRING" size="256"/>
          <Column id="NA_WRS_MCLC" type="STRING" size="256"/>
          <Column id="NA_WRS_SCLC" type="STRING" size="256"/>
          <Column id="NA_WRS_DTCF_C" type="STRING" size="256"/>
          <Column id="DDLY_ST_DT" type="STRING" size="256"/>
          <Column id="DDLY_ED_DT" type="STRING" size="256"/>
          <Column id="DDLY_BAS_QT" type="STRING" size="256"/>
          <Column id="MIN_ODR_DT" type="STRING" size="256"/>
          <Column id="MAX_ODR_DT" type="STRING" size="256"/>
          <Column id="VCBT_NA_WRS_C" type="STRING" size="256"/>
          <Column id="VCBT_QT" type="STRING" size="256"/>
          <Column id="DVY_WRS_UPR" type="STRING" size="256"/>
          <Column id="ODR_FBID_YN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ctr_tpc" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="SIMP_C" type="string" size="32"/>
          <Column id="SIMP_CNM" type="string" size="32"/>
          <Column id="SIMP_C_EXPL" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_na_stl_tp_dsc" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="SIMP_C" type="string" size="32"/>
          <Column id="SIMP_CNM" type="string" size="32"/>
          <Column id="SIMP_C_EXPL" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_box_dsc" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="SIMP_C" type="string" size="32"/>
          <Column id="SIMP_CNM" type="string" size="32"/>
          <Column id="SIMP_C_EXPL" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_dvy_plash_imp_rsn_dsc" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_vhcno" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="PHD_NA_BZPLC" type="STRING" size="256"/>
          <Column id="SPYPL_VHC_PHD_IDVD_NO" type="STRING" size="256"/>
          <Column id="NA_TRPL_C" type="STRING" size="256"/>
          <Column id="VHCNO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_dqpd_rsnc_c" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_bizDtYn">
        <ColumnInfo>
          <Column id="BIZDY_YN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_buyer">
        <ColumnInfo>
          <Column id="NA_WRS_N" type="STRING" size="256"/>
          <Column id="NA_WRS_C" type="STRING" size="256"/>
          <Column id="BUYER_ENO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_uploadresult" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="FILENAME" type="STRING" size="32"/>
          <Column id="FILETYPE" type="STRING" size="32"/>
          <Column id="FILESIZE" type="bigdecimal" size="8"/>
          <Column id="ORGFNAME" type="STRING" size="32"/>
          <Column id="SYSTEMFILENAME" type="STRING" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_dataTC">
        <ColumnInfo>
          <ConstColumn id="NA_BZPLC" type="STRING" size="30" value=""/>
          <ConstColumn id="CLNTNM" type="STRING" size="30" value=""/>
          <ConstColumn id="BZPL_TPC" type="STRING" size="30" value=""/>
          <ConstColumn id="BZPL_DTI_TPC" type="STRING" size="30" value=""/>
          <ConstColumn id="BZPL_TPNM" type="STRING" size="30" value=""/>
          <ConstColumn id="BZPL_DTI_TPNM" type="STRING" size="30" value=""/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_dataTrpl" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CSER_NA_TRPL_C" type="STRING" size="256"/>
          <Column id="CSER_NA_TRPL_N" type="STRING" size="256"/>
          <Column id="CSER_NA_TEAM_C" type="STRING" size="256"/>
          <Column id="CSER_NA_TEAM_N" type="STRING" size="256"/>
          <Column id="SPLR_NA_TRPL_C" type="STRING" size="256"/>
          <Column id="SPLR_NA_TRPL_N" type="STRING" size="256"/>
          <Column id="SPLR_NA_TEAM_C" type="STRING" size="256"/>
          <Column id="DONGUP" type="STRING" size="256"/>
          <Column id="CSER_CTR_TPC" type="STRING" size="256"/>
          <Column id="CSER_CTR_TPC_N" type="STRING" size="256"/>
          <Column id="SPY_TPC" type="STRING" size="256"/>
          <Column id="SPY_TPC_N" type="STRING" size="256"/>
          <Column id="MNGT_NA_TRPL_C" type="STRING" size="256"/>
          <Column id="MNGT_NA_TRPL_N" type="STRING" size="256"/>
          <Column id="MNGT_NA_TEAM_C" type="STRING" size="256"/>
          <Column id="MNGT_TR_TPC" type="STRING" size="256"/>
          <Column id="MNGT_NA_TR_TPC_N" type="STRING" size="256"/>
          <Column id="NA_WRS_LCLC" type="STRING" size="256"/>
          <Column id="NA_WRS_MCLC" type="STRING" size="256"/>
          <Column id="CSER_NA_USR_SYS_KDC" type="STRING" size="256"/>
          <Column id="SPLR_NA_USR_SYS_KDC" type="STRING" size="256"/>
          <Column id="CTR_ST_DT" type="STRING" size="256"/>
          <Column id="CTR_ED_DT" type="STRING" size="256"/>
          <Column id="CTR_STOP_DT" type="STRING" size="256"/>
          <Column id="CTR_CLO_DT" type="STRING" size="256"/>
          <Column id="NA_RGN_N" type="STRING" size="256"/>
          <Column id="PRGR_C" type="STRING" size="256"/>
          <Column id="LDTM_DDS" type="STRING" size="256"/>
          <Column id="MNGT_TR_REL_AMNNO" type="STRING" size="256"/>
          <Column id="CSER_TR_REL_AMNNO" type="STRING" size="256"/>
          <Column id="CSER_ADJPL_NA_TRPL_C" type="STRING" size="256"/>
          <Column id="CSER_ADJPL_NA_TEAM_C" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_trnrel">
        <ColumnInfo>
          <Column id="SPLR_NA_TRPL_C" type="STRING" size="256"/>
          <Column id="SPLR_NA_TEAM_C" type="STRING" size="256"/>
          <Column id="CSER_NA_TRPL_C" type="STRING" size="256"/>
          <Column id="CSER_NA_TEAM_C" type="STRING" size="256"/>
          <Column id="MNGT_NA_TRPL_C" type="STRING" size="256"/>
          <Column id="MNGT_NA_TEAM_C" type="STRING" size="256"/>
          <Column id="CSER_CTR_CTR" type="STRING" size="256"/>
          <Column id="SPY_TPC" type="STRING" size="256"/>
          <Column id="MNGT_NA_TR_TPC" type="STRING" size="256"/>
          <Column id="NA_WRS_C" type="STRING" size="256"/>
          <Column id="PD_YY" type="STRING" size="256"/>
          <Column id="CSER_NA_USR_SYS_KDC" type="STRING" size="256"/>
          <Column id="SPLR_NA_USR_SYS_KDC" type="STRING" size="256"/>
          <Column id="MNGT_NA_USR_SYS_KDC" type="STRING" size="256"/>
          <Column id="ROTS_FLEX_PR_APL_YN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript5.0"><![CDATA[include "lib::comLib.xjs";
/*##################################################################################
 화면명	: 일반등록
 화면ID  	: VAN_DS_SC_0310
 작성자 	: swha
  작성일자 : 2015.07.08
####################################################################################*/
/***************************************************************************************
	code        : 호출할 공통코드
	dsName      : 호출된 공통코드를 담을 Dataset
	selecttype  : ComboBox 최상단에 추가할 문구( A: -전체-, S:-선택-, N: 빈칸)

	selecttype은 추후 변경될 수 있음.
	this.fn_commonAfterOnload를 화면에 선언하면 gfn_setCommonCode처리후 호출됨.
*****************************************************************************************/
var var_odrpl_na_trpl_c 	= ""; 		//발주처코드
var var_odrpl_na_team_c 	= ""; 		//발주처팀코드
var var_odr_dt 				= ""; 		//발주일자
var var_odr_slpno 			= ""; 		//발주전표번호
var var_dlvpnsht_temp_yn 	= "E"; 		//배송예정서 작성여부(X : 미작성, Y : 임시저장, N : 작성완료, E : 무발주)
var var_spypl_na_trpl_c 	= ""; 		//공급처코드
var var_spypl_na_team_c 	= ""; 		//공급처팀코드
var var_dvyaa_na_trpl_c 	= ""; 		//배송처코드
var var_dvyaa_na_team_c 	= "";		//배송처팀코드
var var_na_dvy_plash_slpno 	= "";		//배송예정서전표번호
var var_ddly_yn 			= "";		//직송여부
var var_prgr_c				= "";		//가격군코드
var var_cser_na_usr_sys_kdc = "";		//발주자시스템코드
var var_cser_ctr_tpc 		= "";		//계약유형코드(ds_geja)
var var_spy_tpc				= "";		//공급유형
var var_wr_pre_date			= "";		//배송예정일자 가능일자 From
var	var_next_date			= "";		//배송예정일자 가능일자 To
var bizdyYn 				= "";		//휴일여부
var var_dvy_pla_dt				= "";		// 배송예정일(거래명세표 출력용)
var var_ldtm_dds = 0;
var var_rots_flex_pr_apl_yn = "";		//탄력가격적용업체여부

//상품정보
var min_odr_qt				= ""; 		//최소발주수량
var max_odr_qt 				= ""; 		//최대발주수량
var ddly_st_dt				= ""; 		//직송시작일자
var ddly_ed_dt				= ""; 		//직송종료일자
var ddly_bas_qt				= "";		//직송기준수량
var var_na_wrs_lclc;
var var_na_wrs_mclc;
var var_na_wrs_sclc;
var var_na_wrs_dtcf_c;
var var_vcbt_na_wrs_c;
var objArr = 	[
				 "btn_rowUpdate"
				, "btn_clear"
				, "cal_dvy_pla_dt"
				, "cbo_slgt_etr_dsc"
				, "cbo_vhcno"
				, "mae_dvy_far_astcs"
				, "chk_temp_yn"
				, "cbo_tc"
				];
var dataDArr = new Array(
							'NA_WRS_C'
							, 'WRSNM'
							, 'BOXPE_AQZ'
							, 'WRS_STDNM'
							, 'NA_WRS_UNT_C'
							, 'ODR_QT'
							, 'ODR_PCS'
							, 'ODR_VAT'
							, 'ODR_AM'
							, 'DEL_YN'
							, 'DVY_PLA_QT'
							, 'DQPD_RSNC'
							, 'VCBT_UPR'
							, 'VCBX_UPR'
							, 'ODR_VAT'
							, 'DVY_WRS_UPR'
							, 'SPY_PSB_DT'
							, 'TXT_DSC'
							, 'VCBT_NA_WRS_C'
							, 'DDLY_ST_DT'
							, 'DDLY_ED_DT'
							, 'VCBT_QT'
						);
var wrsInfoArr = new Array(
						  'edt_na_wrs_c'
						, 'edt_wrsnm'
						, 'mae_boxpe_aqz'
						, 'edt_wrs_stdnm'
						, 'edt_na_wrs_unt_c'
						, 'mae_odr_qt'
						, 'mae_odr_pcs'
						, 'mae_odr_vat'
						, 'mae_odr_am'
						, 'chk_del_yn'
						, 'mae_dvy_pla_qt'
						, 'cbo_dqpd_rsnc'
						, 'mae_vcbt_upr'
						, 'mae_vcbx_upr'
						, 'mae_odr_vat'
						, 'mae_dvy_wrs_upr'
						, 'cal_spy_psb_dt'
						, 'edt_txt_dsc'
						, 'edt_vcbt_na_wrs_c'
						, 'edt_ddly_st_dt'
						, 'edt_ddly_ed_dt'
						, 'edt_vcbt_qt'
					);

var postValue = '';
var preValue = '';
var trnrelParams={};

this.fn_resetTc = function(obj, e)
{
	this.fn_tcListSet();
	//alert(this.div_auth.ds_authorityWorkplace.getColumn(this.div_auth.cbo_authorityWorkplace.index, "NA_TRPL_C"));
}

this.form_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	this.btnDisable([this.btn_save, this.btn_cancle]);
	//그리드클릭 이벤트 등록
	this.grd_master.addEventHandler("oncellclick", this.grd_afterFnc, this);
	this.div_auth.cbo_authorityWorkplace.addEventHandler("onitemchanged", this.fn_resetTc, this);
	this.grd_master.set_nodatatext(this.gfn_getTextMessage('result.message.search.no.exist.data'));
	this.authChkDisable();//권한사업장 체크박스 비활성화
	this.gfn_setInitForm(obj, e);//공통

	var param = [
 		{code:"CTR_TPC", dsName:"ds_ctr_tpc", selecttype:"N"}, //계약유형
 		{code:"BOX_DSC", dsName:"ds_box_dsc", selecttype:"N"}, //박스구분
 		{code:"DQPD_RSNC", dsName:"ds_dqpd_rsnc_c", selecttype:"N"} //결품사유코드
    ];
	this.gfn_setCommonCode(param);

};

this.fn_afterFormOnload = function()
{
	var today = this.gfn_today('yyyyMMdd');
	//배송예정일 체크
	var_wr_pre_date = this.gfn_minusDate(today, 31);
	var_next_date = this.gfn_addDate(today, 14);

	this.cal_odr_dt.set_value(today);
	this.cal_dvy_pla_dt.set_value(today);
	this.edt_pre_cd_good.set_value((application.gv_glnCode).substr(0, 7));
	this.cbo_slgt_etr_dsc.set_index(1);
	this.fn_setVhcno();//차량번호 Set
	this.fn_tcListSet();//물류센터 Set
};

//공통코드 데이터셋 onload후 호출할 함수
this.fn_commonAfterOnload= function()
{
	//trace("fn_commonAfterOnload");
	//this.div_search.cbo_contract_type.set_index(0);
}

//TC LIST
this.fn_tcListSet = function() {
	trace("TC 리스트 Set");

	var trplC = this.gfn_nullToEmpty(this.getTrplCode());//권한사업장
	if (this.gfn_isNull(trplC)) {
		trplC = application.gv_glnCode;
	}
	var params = "trplC="+trplC;
	// trace("TC 리스트 Set params : " + params);
	var sSvcID        = "retrieveTC";//통신아이디
	var sURL          = "svc::/rest/scm/delivery/retrieveTC";// 호출할 서버 페이지 주소
	var sInDatasets   = "";//보내는데이터셋
	var sOutDatasets  = "ds_dataTC=ds_dataTC";	//화면에서 받는 데이터셋=보낸이름(1대1 맵핑)
	var sArgument     = params;// 파라미터
	var sCallbackFunc = "fn_callBack";//콜백
	var sTranType     = "S"; // U:저장/삭제, S:조회
	//API 호출
	this.gfn_callService(sSvcID, sURL, sInDatasets, sOutDatasets, sArgument, sCallbackFunc, sTranType);
}

this.btn_pup_van_seq_onclick = function(obj:Button, e:nexacro.ClickEventInfo)
{
	//권한사업장 표시 여부(1:본사)
	/**
	if (application.gv_mbcoType == '5') {
		alert('위탁등록은 배송예정서위탁등록 메뉴를 이용해주십시오.');
		return;
	}
	**/
	if (this.gfn_isNull(this.edt_tc_trpl_c.value)) {
		alert("수주처를 먼저 선택해 주세요");
		return false;
	}

	var trplC = this.getTrplCode();//권한사업장
	var opt_odr_dt = this.gfn_nullToEmpty(this.cal_odr_dt.value);
	var oArg = {opt_odr_dt:opt_odr_dt, form_id:"VAN_DS_SC_0300", ddly_yn:'1', trplC:this.edt_tc_trpl_c.value, spypl_na_trpl_c:trplC};
	var sOption = "autosize=true, title=false";
	var sPopupCallBack = "fn_popupAfter";
	this.gfn_openPopup("retrieveOrdersPopUp", "SCM.EVENT::VAN_DS_FN_0204.xfdl", oArg, sOption, sPopupCallBack);
}


/*Grid Init*/
this.fn_init = function() {
	this.btn_clear_onclick(); //wrs init
}

this.btn_clear_onclick = function(obj:Button, e:nexacro.ClickEventInfo)
{
	this.fn_detail_clear();
	this.edt_na_wrs_c.setFocus();
	this.edt_na_wrs_c.setCaretPos(-1);
	this.edt_na_wrs_c.set_enable(true);
	this.edt_wrsnm.set_enable(true);
}

this.fn_detail_clear = function()
{
	for (var i = 0; i < wrsInfoArr.length; i++) {
		var obj = wrsInfoArr[i];
		if (obj.indexOf('mae') > -1) {
			eval("this."+wrsInfoArr[i]+".set_value(0);");
		} else if (obj.indexOf('edt') > -1) {
			eval("this."+wrsInfoArr[i]+".set_value('');");
		} else if (obj.indexOf('chk') > -1) {
			eval("this."+wrsInfoArr[i]+".set_value('N');");
		} else if (obj.indexOf('cbo') > -1) {
			eval("this."+wrsInfoArr[i]+".set_index(-1);");
		} else {
			eval("this."+wrsInfoArr[i]+".set_value('');");
		}
	}
}

/* Search */
this.fn_search = function()
{
	trace("배송예정서 작성 여부 : " + var_dlvpnsht_temp_yn);

	if (var_dlvpnsht_temp_yn == "X") {
		trace("배송예정서 미작성");
		this.fn_srhOrder();
	}

	if (var_dlvpnsht_temp_yn == "Y") {
		trace("배송예정서 임시저장");
		this.fn_srhDeliveryNotice();
	}

	if (var_dlvpnsht_temp_yn == "" || var_dlvpnsht_temp_yn == "N") {
		trace("배송예정서 작성완료");
		this.fn_srhDeliveryNotice();
	}
}

/* 배송예정서 조회 */
this.fn_srhDeliveryNotice = function()
{
	var spypl_na_trpl_c = var_spypl_na_trpl_c;
	var dvyaa_na_trpl_c = var_dvyaa_na_trpl_c;
	var na_dvy_plash_slpno = var_na_dvy_plash_slpno;
	var dvy_pla_dt = var_dvy_pla_dt;

	var params =   "spypl_na_trpl_c=" + spypl_na_trpl_c
				 + " dvyaa_na_trpl_c=" + dvyaa_na_trpl_c
				 + " na_dvy_plash_slpno=" + na_dvy_plash_slpno
				 + " dvy_pla_dt=" + dvy_pla_dt;

	// trace("배송예정서 params : " + params);

	var sSvcID        = "getDeliveryNoticeOrder";//통신아이디
	var sURL          = "svc::/rest/scm/delivery/getDeliveryNoticeOrder";// 호출할 서버 페이지 주소
	var sInDatasets   = "";//보내는데이터셋
	var sOutDatasets  = "ds_dataM=ds_dataM ds_dataD=ds_dataD";	//화면에서 받는 데이터셋=보낸이름(1대1 맵핑)
	var sArgument     = params;// 파라미터
	var sCallbackFunc = "fn_callBack";//콜백
	var sTranType     = "S"; // U:저장/삭제, S:조회

	//API 호출
	this.gfn_callService(sSvcID, sURL, sInDatasets, sOutDatasets, sArgument, sCallbackFunc, sTranType);
}

/* 발주정보 조회 */
this.fn_srhOrder = function()
{
	var odrpl_na_trpl_c = var_odrpl_na_trpl_c;
	var odrpl_na_team_c = var_odrpl_na_team_c;
	var odr_dt = var_odr_dt;
	var odr_slpno = var_odr_slpno;


	var params =   " odrpl_na_trpl_c=" + odrpl_na_trpl_c
				 + " odrpl_na_team_c=" + odrpl_na_team_c
				 + " odr_dt=" + odr_dt
				 + " odr_slpno=" + odr_slpno
				 + " ddly_yn=1";

	// trace("fn_srhOrder params : " + params);

	var sSvcID        = "getOrder";//통신아이디
	var sURL          = "svc::/rest/scm/delivery/getOrder";// 호출할 서버 페이지 주소
	var sInDatasets   = "";//보내는데이터셋
	var sOutDatasets  = "ds_dataM=ds_dataM ds_dataD=ds_dataD";	//화면에서 받는 데이터셋=보낸이름(1대1 맵핑)
	var sArgument     = params;// 파라미터
	var sCallbackFunc = "fn_callBack";//콜백
	var sTranType     = "S"; // U:저장/삭제, S:조회

	//API 호출
	this.gfn_callService(sSvcID, sURL, sInDatasets, sOutDatasets, sArgument, sCallbackFunc, sTranType);
}

/* User Function */
//공급처 차량조회
this.fn_setVhcno = function()
{
	var sSvcID        = "retrieveVhcno";//통신아이디
	var sURL          = "svc::/rest/scm/delivery/retrieveVhcno";// 호출할 서버 페이지 주소
	var sInDatasets   = "";//보내는데이터셋
	var sOutDatasets  = "ds_vhcno=ds_vhcno";	//화면에서 받는 데이터셋=보낸이름(1대1 맵핑)
	var sArgument     = "";// 파라미터
	var sCallbackFunc = "fn_callBack";//콜백
	var sTranType     = "S"; // U:저장/삭제, S:조회

	//API 호출
	this.gfn_callService(sSvcID, sURL, sInDatasets, sOutDatasets, sArgument, sCallbackFunc, sTranType);
}

this.btn_init_onclick = function(obj:Button, e:nexacro.ClickEventInfo)
{
	this.reload();
}

//상품리스트 클릭
this.grd_afterFnc = function(obj, e)
{
/*
	if (e.reason == 51)
	{
      this.ds_dataD.set_enableevent(false);
      this.ds_dataD.set_rowposition(-1);
      this.ds_dataD.set_enableevent(true);
      return;
	}
*/
   //trace(this.ds_dataD.saveXML());

	if (e.cell == 17) {
		this.fn_sum();
	} else {
		this.edt_na_wrs_c.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "NA_WRS_C")));
		this.edt_wrsnm.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "WRSNM")));
		this.mae_boxpe_aqz.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "BOXPE_AQZ")));
		this.edt_wrs_stdnm.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "WRS_STDNM")));
		this.edt_na_wrs_unt_c.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "NA_WRS_UNT_C")));
		this.mae_odr_qt.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "ODR_QT")));
		this.mae_odr_pcs.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "ODR_PCS")));
		this.mae_odr_vat.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "ODR_VAT")));
		this.mae_odr_am.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "ODR_AM")));
		this.chk_del_yn.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "DEL_YN")));
		this.mae_dvy_pla_qt.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "DVY_PLA_QT")));
		this.cbo_dqpd_rsnc.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "DQPD_RSNC")));
		this.mae_dvy_wrs_upr.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "DVY_WRS_UPR")));
		this.mae_vcbt_upr.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "VCBT_UPR")));
		this.mae_vcbx_upr.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "VCBX_UPR")));
		this.cal_spy_psb_dt.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "SPY_PSB_DT")));
		this.edt_txt_dsc.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "TXT_DSC")));
		this.edt_ddly_st_dt.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "DDLY_ST_DT")));
		this.edt_ddly_ed_dt.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "DDLY_ED_DT")));
		this.edt_vcbt_qt.set_value(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "VCBT_QT"));
		ddly_st_dt 			= this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "DDLY_ST_DT"));
		ddly_ed_dt 			= this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "DDLY_ED_DT"));
		ddly_bat_dt 		= this.gfn_getNum(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "DDLY_BAT_QT"));
		this.edt_min_odr_qt.set_value(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "MIN_ODR_QT"));
		var_vcbt_na_wrs_c 	= this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "VCBT_NA_WRS_C"));

		this.edt_na_wrs_c.set_enable(false);
		this.edt_wrsnm.set_enable(false);

		//trace(this.ds_dataD.saveXML());
// 		trace("ddly_st_dt 	: " + ddly_st_dt);
// 		trace("ddly_ed_dt 	: " + ddly_ed_dt);
// 		trace("ddly_bat_dt 	: " + ddly_bat_dt);
// 		trace("min_odr_qt 	: " + min_odr_qt);
// 		trace("max_odr_qt 	: " + max_odr_qt);
// 		trace("var_vcbt_na_wrs_c 	: " + var_vcbt_na_wrs_c);

		this.mae_dvy_pla_qt.setFocus();
	}
}

this.btn_rowUpdate_onclick = function(obj:Button, e:nexacro.ClickEventInfo)
{
	var wrsB = false;

	/* 191014 상품코드 변경 8801007100692 -> 8801007809724 (마트(상품본부)28101-122, 2019.4.27) */
	/* 경제지주 김병훈 과장님 요청에 의해 2023.05.02 납품단가 체크 해지 
   if (this.edt_na_wrs_c.value == '8801007809724' || this.edt_na_wrs_c.value == '8801007101286' || this.edt_na_wrs_c.value == '8801007101385') {
      wrsB = true;
   } else if (this.edt_na_wrs_c.value == '8801013111507' || this.edt_na_wrs_c.value == '8801013121506') {
      wrsB = true;
   } else if (this.edt_na_wrs_c.value == '8801199011011' || this.edt_na_wrs_c.value == '8801199021010') {
      wrsB = true;
   }
   */

	if (wrsB) {
// 		// 190323 파업대비 설탕 수량체크 해제
// 		if (this.mae_dvy_pla_qt.value < 60) {
// 			alert("대용량 설탕은 최소 수량이 60개입니다.");
// 			return;
// 		}
// 		if (this.mae_dvy_wrs_upr.value > 23000) {
// 			alert("납품단가가 23, 000원을 초과하였습니다.");
// 			return;
// 		}
// 	}

	if (this.fn_validationDetail()) {
		this.fn_isUpdate();
		this.fn_detail_clear();
		this.fn_detail_hidden_clear();
		//this.ds_dataD.set_rowposition(-1);
		this.edt_na_wrs_c.setCaretPos(-1);
		this.edt_na_wrs_c.set_enable(true);
		this.edt_wrsnm.set_enable(true);
		this.mae_dvy_wrs_upr.set_enable(false);
		this.edt_na_wrs_c.setFocus();
	}
}

//detail hidden clear
this.fn_detail_hidden_clear = function()
{
	this.edt_pd_yy.set_value('');
	this.edt_pd_yy_amn_yn.set_value('');
	this.edt_txt_dsc.set_value('');
	this.mae_vcbt_upr.set_value('');
	this.mae_vcbx_upr.set_value('');
}

this.fn_validationDetail = function()
{
	/*
		var_dlvpnsht_temp_yn
		(X : 미작성, Y : 임시저장, N : 작성완료, E : 무발주)
	 */
	var dvy_pla_qt 			= this.gfn_getNum(this.mae_dvy_pla_qt.value);//배송예정량
	var boxpe_aqz 			= this.gfn_getNum(this.gfn_nullToEmpty(this.mae_boxpe_aqz.value));//박스입수량
	var odr_qt 				= this.gfn_getNum(this.gfn_nullToEmpty(this.mae_odr_qt.value));//수주량
	var dvy_am				= this.gfn_getNum(this.gfn_nullToEmpty(this.mae_odr_am.value));//배송예정금액
	var dvy_vat				= this.gfn_getNum(this.gfn_nullToEmpty(this.mae_odr_vat.value));//배송예정금액
	var dqpd_rsnc 			= this.gfn_nullToEmpty(this.cbo_dqpd_rsnc.value);//결품사유
	var pd_yy_amn_yn 		= this.gfn_nullToEmpty(this.edt_pd_yy_amn_yn.value);//생산년도관리여부
    var pd_yy 				= this.gfn_nullToEmpty(this.edt_pd_yy.value);//생산년도
    var txt_dsc 			= this.gfn_nullToEmpty(this.edt_txt_dsc.value);//과세구분
	var spy_psb_dt 			= this.gfn_nullToEmpty(this.cal_spy_psb_dt.value);//공급가능일자
	var dvy_pla_dt			= this.gfn_nullToEmpty(this.cal_dvy_pla_dt.value);//배송예정일자
	var dvy_wrs_upr			= this.gfn_getNum(this.mae_dvy_wrs_upr.value);//상품단가
	var odr_pcs 			= this.fParseFloat(this.mae_odr_pcs.value);//수주단가
	var ddly_st_dt			= this.gfn_nullToEmpty(this.edt_ddly_st_dt.value);//직송시작일자
	var ddly_ed_dt			= this.gfn_nullToEmpty(this.edt_ddly_ed_dt.value);//직송마감일자
	var redvy_wrs_upr 		= odr_pcs * 0.3;


	if ((this.gfn_trim(var_cser_na_usr_sys_kdc) =="52") || (this.gfn_trim(var_cser_na_usr_sys_kdc) =="54") && var_dlvpnsht_temp_yn == 'E') {
		alert("발주처가 물류센터이면 무발주 배송예정서를 작성하실 수 없습니다.");
		return false;
	}

	if (this.gfn_isNull(this.edt_na_wrs_c.value)) {
		alert("상품을 선택해 주세요");
		return false;
	}

	if ((dvy_wrs_upr < redvy_wrs_upr) && (dvy_wrs_upr != redvy_wrs_upr)) {
		alert("납품단가는 탄력가격제한["+redvy_wrs_upr+"]이상 입력 가능합니다.");
		return false;
	}

	if (this.gfn_isNull(dvy_pla_dt)) {
		alert("배송예정일자를 입력해 주세요");
		return false;
	}

// 	trace("ddly_st_dt : "+ ddly_st_dt);
// 	trace("ddly_ed_dt : "+ ddly_ed_dt);
// 	trace("dvy_pla_dt : "+ dvy_pla_dt);

	// 직송시간종료일자 체크
	/* 181026파업대비주석처리
	if ( !(ddly_st_dt <= dvy_pla_dt &&  dvy_pla_dt <= ddly_ed_dt)) {
		var trplR 	= this.ds_dataTC.getColumn(this.cbo_tc.index, "NA_BZPLC");
		var trplRN 	= this.ds_dataTC.getColumn(this.cbo_tc.index, "CLNTNM");
		var trplO 	= this.edt_orpl_na_trpl_c.value;
		var trplON 	= this.edt_shrt_bzplnm.value;
		var na_wrs_c = this.edt_na_wrs_c.value;
		var wrsnm = this.edt_wrsnm.value;
		var msg = 	 "수주처 : " + trplRN + " \n"
					+"발주처 : "+ trplON + "["+trplO+"] \n"
					+"상품코드 : "+ wrsnm + "[" + na_wrs_c + "] \n"
					+"직송여부 : [여]["+ ddly_st_dt + " ~ " + ddly_ed_dt + " ]";
		alert(msg);
		return false;
	}
	*/

	/* 190424파업대비_안성저온, 삼동(밀양)저온 박스당 입수 예외처리
	 * 8808983322353 농협안성저온물류센터(식자재)
	 * 8808983324562 농협안성저온물류센터(소매)
	 * 8808983325958 농협삼동저온물류센터(소매) - 밀양
	 */
	var chkBoxAqz = true;
	if (this.cbo_tc.value == '8808983322353' || this.cbo_tc.value == '8808983324562' || this.cbo_tc.value == '8808983325958') {
		chkBoxAqz = false;
	}

	if (chkBoxAqz) {
		if (this.gfn_getNum(ddly_bas_qt) > dvy_pla_qt) {
			alert("직송수량 [ " + ddly_bas_qt + " ] 이상으로 입력해 주세요");
			return false;
		}
	}

// 	trace("ddly_st_dt : " + ddly_st_dt);
// 	trace("ddly_ed_dt : " + ddly_ed_dt);
// 	trace("dvy_pla_qt : " + dvy_pla_qt);
// 	trace("ddly_bas_qt : " + ddly_bas_qt);
// 	trace("var_prgr_c : " + var_prgr_c);
// 	trace("min_odr_qt : " + min_odr_qt);

	if (chkBoxAqz) {
		if ( var_prgr_c == "00" && this.gfn_getNum(min_odr_qt) > 0 &&
			 (dvy_pla_qt % this.gfn_getNum(min_odr_qt)) != 0) {

			var trplO = this.edt_orpl_na_trpl_c.value;
			var trplON = this.edt_shrt_bzplnm.value;

			var msg =    "물류센터 거래의 경우 배송예정수량은 박스당입수의 배수 값을 입력해야 합니다. \n"
						+"발주처 : " +  trplON + "[" + trplO + "] \n"
						+"입수 배송예정량 :["+ dvy_pla_qt +"] \n"
						+"발주배수 : ["+ min_odr_qt + "]";
			this.alert(msg);
			return;
		}
    }

	if (odr_pcs <= 0) {//단가가 없는 경우 바이어 호출

		var na_wrs_n		= "";
		var na_wrs_c		= "";
		var na_wrs_lclc 	= "";
		var na_wrs_mclc 	= "";
		var na_wrs_sclc 	= "";
		var na_wrs_dtcf_c 	= "";

		var dsWrsCnt = 0;
		for (var i=0; i < this.ds_dataD.rowcount; i++) {
			var ds_na_wrs_c = this.ds_dataD.getColumn(this.ds_dataD.rowposition, "NA_WRS_C");
			if (this.edt_na_wrs_c.value == ds_na_wrs_c) {
				dsWrsCnt = dsWrsCnt + 1;
			}
		}

		if (dsWrsCnt > 0) {
			na_wrs_n		= this.ds_dataD.getColumn(this.ds_dataD.rowposition, "WRSNM");
			na_wrs_c		= this.ds_dataD.getColumn(this.ds_dataD.rowposition, "NA_WRS_C");
			na_wrs_lclc 	= this.ds_dataD.getColumn(this.ds_dataD.rowposition, "NA_WRS_LCLC");
			na_wrs_mclc 	= this.ds_dataD.getColumn(this.ds_dataD.rowposition, "NA_WRS_MCLC");
			na_wrs_sclc 	= this.ds_dataD.getColumn(this.ds_dataD.rowposition, "NA_WRS_SCLC");
			na_wrs_dtcf_c 	= this.ds_dataD.getColumn(this.ds_dataD.rowposition, "NA_WRS_DTCF_C");
		} else {
			na_wrs_n = this.edt_wrsnm.value;
			na_wrs_c = this.edt_na_wrs_c.value;
			na_wrs_lclc 	= var_na_wrs_lclc;
			na_wrs_mclc 	= var_na_wrs_mclc;
			na_wrs_sclc 	= var_na_wrs_sclc;
			na_wrs_dtcf_c 	= var_na_wrs_dtcf_c;
		}

		var params = "";
		params = 	"na_wrs_lclc=" + na_wrs_lclc
					 + " na_wrs_mclc=" + na_wrs_mclc
					 + " na_wrs_sclc=" + na_wrs_sclc
					 + " na_wrs_dtcf_c=" + na_wrs_dtcf_c
					 + " na_wrs_n=" + na_wrs_n
					 + " na_wrs_c=" + na_wrs_c;


		// trace("getBuyer params : " + params);
		var sSvcID        = "getBuyer";//통신아이디
		var sURL          = "svc::/rest/scm/delivery/getBuyer";// 호출할 서버 페이지 주소
		var sInDatasets   = "";//보내는데이터셋
		var sOutDatasets  = "ds_buyer=ds_buyer";	//화면에서 받는 데이터셋=보낸이름(1대1 맵핑)
		var sArgument     = params;// 파라미터
		var sCallbackFunc = "fn_callBack";//콜백
		var sTranType     = "S"; // U:저장/삭제, S:조회

		//API 호출
		this.gfn_callService(sSvcID, sURL, sInDatasets, sOutDatasets, sArgument, sCallbackFunc, sTranType);
		return false;
		//바이어 호출
	}

	if (dvy_pla_qt < 0) {
		alert("수량을 입력하세요");
		this.mae_dvy_pla_qt.setFocus();
		return false;
	}

	if (odr_qt > 0 && (odr_qt < dvy_pla_qt)) {
		var msg = 		" 배송예정량을 수주량 보다 많이 입력할 수 없습니다. \n "
					+ 	" 수주량 : [" + odr_qt + "] / 배송예정량 : [" + dvy_pla_qt + "]";
		alert(msg);
		return false;
	}

	if (chkBoxAqz) {
		if ((dvy_pla_qt % boxpe_aqz) != 0) {
			var trplO = this.edt_orpl_na_trpl_c.value;
			var trplON = this.edt_shrt_bzplnm.value;

			var msg =    "물류센터 거래의 경우 배송예정수량은 박스당입수의 배수 값을 입력해야 합니다. \n"
						+"발주처 : " +  trplON + "[" + trplO + "] \n"
						+"입수 배송예정량 :["+ dvy_pla_qt +"] \n"
						+"박스당 입수 : ["+ boxpe_aqz + "]";
			this.alert(msg);
			return false;
		}
	}
	/*
	if (var_prgr_c == "00") {
		var svc_qt = this.gfn_getNum(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "SVC_QT"));
		trace("svc_qt : " + svc_qt);
		if (svc_qt > 0) {
			boxpe_aqz = svc_qt;
		}
		if ((dvy_pla_qt % boxpe_aqz) != 0) {
			var msg =	"배송예정수량[" + dvy_pla_qt + "] 이 박스당 입수 [" + boxpe_aqz + "] 와 맞지 않습니다. \n\n" +
						"박스당 입수의 배수로 수량을 입력하세요";
			this.alert(msg);
			return false;
		}
	}
	*/

    if ( pd_yy_amn_yn == "0" && pd_yy != "0000" && pd_yy.length > 0) {
        alert("생산년도 오류입니다.생산년도["+pd_yy+"] 관리하지 않는 상품입니다.");
        return false;
    }

     if ( pd_yy_amn_yn == "1" && pd_yy == "0000") {
        alert("생산년도 오류입니다.생산년도 관리하는 상품입니다.");
        return(false);
    }

    if (txt_dsc == "1" && dvy_pla_qt > 0 && dvy_am > 0 && dvy_vat == 0) {
        alert("부가세 오류입니다.부가세가 존재하는 상품인데 부가세가 0 입니다.");
        return(false);
    }

	if (this.gfn_isNull(this.edt_na_wrs_c.value)) {
		alert("상품코드를 확인하세요");
		return false;
	}

	if (this.gfn_isNull(this.edt_wrsnm.value)) {
		alert("상품명을 확인하세요");
		return false;
	}

	if (this.gfn_getNum(this.mae_odr_am.value) <= 0) {
		//alert("배송예정금액를 확인해 주세요");
		//return false;
	}

	/*
		무발주 작성이 아닌경우
	*/
	if (dvy_pla_qt == undefined) {
		dvy_pla_qt = 0;
	}

	if (boxpe_aqz == undefined) {
		boxpe_aqz = 0;
	}

	if (var_dlvpnsht_temp_yn == "E") {//무발주인경우
		if (dvy_pla_qt == 0) {
			alert("배송예정량을 입력해 주세요");
			return false;
		}
	}
	return true;
}

this.fn_isUpdate = function()
{
	var duplicateRowCount = 0;
	for (var i=0;i<this.grd_master.rowcount;i++) {
		var na_wrs_c = this.ds_dataD.getColumn(i, "NA_WRS_C");
		if (na_wrs_c == this.edt_na_wrs_c.value) {
			++duplicateRowCount;
			//var bok = application.confirm("[ "+this.edt_na_wrs_c.value+" / "+this.edt_wrsnm.value+" ] 는(은) 이미 등록된 자료입니다. 수정하시겠습니까 ?");
			this.fn_rowUpdate();
			//if (bok == true) {
			//	this.fn_rowUpdate();
			//} else {
			//	return false;
			//}
		}
	}
	
	var row = this.ds_dataD.rowposition;
	if (duplicateRowCount == 0) { //상품추가
		if (this.gfn_isNull(this.edt_odr_slpno.value) == false || this.ds_dataM.getColumn(0, "NORDER_YN") == "0") {
			alert("발주 배송예정서 등록 시 상품 추가는 불가합니다.");
			return false;
		}

		if (this.gfn_isNull(this.mae_dvy_pla_qt.value)) {
			alert("배송예정량을 입력해 주세요");
			return false;
		}

		if (this.ds_dataD.rowcount == 100) {
			this.alert("상품은 최대 100건 이상 등록하실수 없습니다.");
			return;
		}
		row = this.ds_dataD.addRow();
		this.fn_rowInsert(row);
	}

	this.detail_sum(row);//합계 계산
	this.sta_grd_master_cnt.set_text(this.ds_dataD.rowcount);
}

this.fn_rowUpdate = function()
{
	for (var i = 0; i < dataDArr.length; i++) {
		if (wrsInfoArr[i] == "chk_del_yn") {
			if (this.chk_del_yn.value != 'N') {
				eval("this.ds_dataD.setColumn(this.ds_dataD.rowposition, '"+dataDArr[i]+"', '1')");
			} else {
				eval("this.ds_dataD.setColumn(this.ds_dataD.rowposition, '"+dataDArr[i]+"', '0')");
			}
		} else {
			eval("this.ds_dataD.setColumn(this.ds_dataD.rowposition, '"+dataDArr[i]+"', this."+wrsInfoArr[i]+".value)");
		}
	}
}

this.fn_rowInsert = function(row)
{
	for (var i = 0; i < dataDArr.length; i++) {
		eval("this.ds_dataD.setColumn("+ row +", '"+dataDArr[i]+"', this."+wrsInfoArr[i]+".value)");
	}

	var seqArr = new Array();
	for (var j = 0; j < this.ds_dataD.rowcount; j++) {
		seqArr[j] = this.gfn_getNum(this.ds_dataD.getColumn(j, 'DVY_PLA_SQNO'));
	}
	var nextSeq = Math.max.apply(null, seqArr) + 1;
	this.ds_dataD.setColumn(row, 'DVY_PLA_SQNO', nextSeq);
	this.ds_dataD.setColumn(row, 'DEL_YN', '0');
}

this.detail_sum = function(row)
{
	/* sum */
	this.ds_dataD.setColumn(row, 'SSDYRT', "0");
	this.ds_dataD.setColumn(row, 'SSDY_BAS_AM', "0");
	this.ds_dataD.setColumn(row, 'VCBT_AM', (this.mae_vcbt_upr.value * this.mae_dvy_pla_qt.value * this.edt_vcbt_qt.value));
	this.ds_dataD.setColumn(row, 'VCBX_AM', (this.gfn_getNum(this.mae_dvy_pla_qt.value) / this.gfn_getNum(this.mae_boxpe_aqz.value) * this.gfn_getNum(this.mae_vcbx_upr.value)));
	var dvy_am 	= 0;
	var dvy_vat = 0;
	for (var i = 0; i < this.ds_dataD.rowcount; i++) {
		dvy_am 	= dvy_am + this.ds_dataD.getColumn(i , "ODR_AM");
		dvy_vat = dvy_vat + this.ds_dataD.getColumn(i , "ODR_VAT");
	}

	this.mae_total_dvy_am.set_value(dvy_am);
	this.mae_total_dvy_vat.set_value(dvy_vat);
}

this.fn_cancelProc = function()
{
	var spypl_na_trpl_c = this.ds_dataM.getColumn(0, "SPYPL_NA_TRPL_C");
	var dvyaa_na_trpl_c = this.ds_dataM.getColumn(0, "DVYAA_NA_TRPL_C");
	var na_dvy_plash_slpno = this.ds_dataM.getColumn(0, "NA_DVY_PLASH_SLPNO");
	var dvy_pla_dt = this.ds_dataM.getColumn(0, "DVY_PLA_DT");
	var params =  	"spypl_na_trpl_c=" + spypl_na_trpl_c
				 + 	" dvyaa_na_trpl_c=" + dvyaa_na_trpl_c
				 + 	" na_dvy_plash_slpno=" + na_dvy_plash_slpno
				 + 	" dvy_pla_dt=" + dvy_pla_dt;

	var sSvcID        = "deliveryNoticeCancelProc";//통신아이디
	var sURL          = "svc::/rest/scm/delivery/deliveryNoticeCancelProc";// 호출할 서버 페이지 주소
	var sInDatasets   = "";//보내는데이터셋
	var sOutDatasets  = "";	//화면에서 받는 데이터셋=보낸이름(1대1 맵핑)
	var sArgument     = params;// 파라미터
	var sCallbackFunc = "fn_callBack";//콜백
	var sTranType     = "U"; // U:저장/삭제, S:조회

	//API 호출
	this.gfn_callService(sSvcID, sURL, sInDatasets, sOutDatasets, sArgument, sCallbackFunc, sTranType);
}

this.btn_save_onclick = function(obj:Button, e:nexacro.ClickEventInfo)
{
	this.fn_SessionChk();
}

this.fn_dvy_save = function()
{
	var trplC = application.gv_glnCode;
	var wrsB = 0;
	var wrsC = "";
	var wrsQt = 0;
	var wrsA = false;
	if (trplC.substring(0, 7) == '8801007') {

		for (var i=0; i<this.ds_dataD.rowcount; i++) {
			wrsC = this.ds_dataD.getColumn(i, "NA_WRS_C");
			//대용량 설탕은 대용량 설탕끼리만 배송예정서를 작성할 수 있다.
			if (wrsC == '8801007809724' || wrsC == '8801007101286' || wrsC == '8801007101385') {
				wrsA = true;
				wrsB += 1;
				wrsQt += 1; // 구매단가구분코드를 1로 셋팅한다.
			}
			/*
			//설탕이 건마다 60개가 넘을 경우에 구매단가구분코드를 1로 셋팅한다.
			if (this.ds_dataD.getColumn(i, "DVY_PLA_QT") >= 60) {
				wrsQt += 1;
			}
			*/
		}
		if (wrsA) {
			if (this.ds_dataD.rowcount == wrsB) {
				if (this.ds_dataD.rowcount == wrsQt) {
					this.buy_upr_dsc.set_value("1");
				} else {
					this.buy_upr_dsc.set_value("");
				}
			} else {
				alert("대용량 설탕은 다른 상품과 같이 배송예정서를 작성할 수 없습니다.");
				return;
			}
		}

	} else if (trplC.substring(0, 7) == '8801013') {
		for (var i=0; i<this.ds_dataD.rowcount; i++) {
			wrsC = this.ds_dataD.getColumn(i, "NA_WRS_C");
			//대용량 설탕은 대용량 설탕끼리만 배송예정서를 작성할 수 있다.
			if (wrsC == '8801013111507' || wrsC == '8801013121506') {
				wrsA = true;
				wrsB += 1;
				wrsQt += 1; // 구매단가구분코드를 1로 셋팅한다.
			}
			/*
			//설탕이 건마다 60개가 넘을 경우에 구매단가구분코드를 1로 셋팅한다.
			if (this.ds_dataD.getColumn(i, "DVY_PLA_QT") >= 60) {
				wrsQt += 1;
			}
			*/
		}
		if (wrsA) {
			if (this.ds_dataD.rowcount == wrsB) {
				if (this.ds_dataD.rowcount == wrsQt) {
					this.buy_upr_dsc.set_value("1");
				} else {
					this.buy_upr_dsc.set_value("");
				}
			} else {
				alert("대용량 설탕은 다른 상품과 같이 배송예정서를 작성할 수 없습니다.");
				return;
			}
		}
	} else if (trplC.substring(0, 7) == '8801199') {
		for (var i=0; i<this.ds_dataD.rowcount; i++) {
			wrsC = this.ds_dataD.getColumn(i, "NA_WRS_C");
			//대용량 설탕은 대용량 설탕끼리만 배송예정서를 작성할 수 있다.
			if (wrsC == '8801199011011' || wrsC == '8801199021010') {
				wrsA = true;
				wrsB += 1;
				wrsQt += 1; // 구매단가구분코드를 1로 셋팅한다.
			}
			/*
			//설탕이 건마다 60개가 넘을 경우에 구매단가구분코드를 1로 셋팅한다.
			if (this.ds_dataD.getColumn(i, "DVY_PLA_QT") >= 60) {
				wrsQt += 1;
			}
			*/
		}
		if (wrsA) {
			if (this.ds_dataD.rowcount == wrsB) {
				if (this.ds_dataD.rowcount == wrsQt) {
					this.buy_upr_dsc.set_value("1");
				} else {
					this.buy_upr_dsc.set_value("");
				}
			} else {
				alert("대용량 설탕은 다른 상품과 같이 배송예정서를 작성할 수 없습니다.");
				return;
			}
		}
	}

	if (!this.gfn_isNull(this.edt_na_dvy_plash_slpno.value)) {
		var resDesc = this.ds_dataM.getColumn(0, "RES_DESC");
		if (resDesc != "" && resDesc != "SUCCESS") {
			alert("배송예정서는 [" + resDesc +"] 상태로 수정하실 수 없습니다.");
			return false;
		}

	}
	
	var odrpl_na_trpl_c = this.gfn_nullToEmpty(this.edt_orpl_na_trpl_c.value);
	if (odrpl_na_trpl_c == "8808983410142" || odrpl_na_trpl_c == "8808983410159"  || odrpl_na_trpl_c == '8808983324388'
		|| odrpl_na_trpl_c == "8808983326641" || odrpl_na_trpl_c == "8808983326634") {
		alert('축산, 수산 배송예정서 등록 및 거래명세서 출력 업무는 축산, 수산 메뉴를 이용해 주시기 바랍니다.');
		return false;
	}

	var dvy_pla_dt = this.gfn_toString(this.cal_dvy_pla_dt.value);
	if (this.gfn_isNull(this.cal_dvy_pla_dt.value)) {
		alert("배송예정일자를 입력해주세요");
		return false;
	} else {
		var dvy_pla_dt	= this.gfn_nullToEmpty(this.cal_dvy_pla_dt.value);
		this.fn_BizDtYn("2", "", dvy_pla_dt);
	}
}

var var_chk_part;
//휴일 체크
this.fn_BizDtYn = function(chkPart, preDate, date)
{
	var dvy_pla_dt 		= this.gfn_nullToEmpty(date);
	var odrpl_na_trpl_c = this.gfn_nullToEmpty(this.edt_tc_trpl_c.value);
	var_chk_part = chkPart;

	var trplO="";
	var teamO="";
	var trplR="";
	var teamR="";

	if (
			this.gfn_isNull(this.ds_dataM.getColumn(0, "ODRPL_NA_TRPL_C")) == false
		&& 	this.gfn_isNull(this.ds_dataM.getColumn(0, "ODRPL_NA_TEAM_C")) == false
		&& 	this.gfn_isNull(this.ds_dataM.getColumn(0, "RVOPL_NA_TRPL_C")) == false
		&& 	this.gfn_isNull(this.ds_dataM.getColumn(0, "RVOPL_NA_TEAM_C")) == false
	) {
		trplO = this.ds_dataM.getColumn(0, "ODRPL_NA_TRPL_C");
		teamO = this.ds_dataM.getColumn(0, "ODRPL_NA_TEAM_C");
		trplR = this.ds_dataM.getColumn(0, "RVOPL_NA_TRPL_C");
		teamR = this.ds_dataM.getColumn(0, "RVOPL_NA_TEAM_C");
	 } else {
		trplO = this.gfn_nullToEmpty(this.edt_tc_trpl_c.value);
		teamO = this.gfn_nullToEmpty("00");
	 }

// 	trace("trplO : " + trplO);
// 	trace("teamO : " + teamO);
// 	trace("trplR : " + trplR);
// 	trace("teamR : " + teamR);

	var params = 	" dvy_pla_dt="+dvy_pla_dt
					+ " odrpl_na_trpl_c=" + odrpl_na_trpl_c
					+ " chkPart=" + chkPart
					+ " trplO=" + trplO
					+ " teamO=" + teamO
					+ " trplR=" + trplR
					+ " teamR=" + teamR;
	// trace("휴일 조회 : " + params);

	var sSvcID        = "getBizDtYn";//통신아이디
	var sURL          = "svc::/rest/scm/delivery/getBizDtYn";// 호출할 서버 페이지 주소
	var sInDatasets   = "";//보내는데이터셋
	var sOutDatasets  = "ds_bizDtYn=ds_bizDtYn";	//화면에서 받는 데이터셋=보낸이름(1대1 맵핑)
	var sArgument     = params;// 파라미터
	var sCallbackFunc = "fn_callBack";//콜백
	var sTranType     = "S"; // U:저장/삭제, S:조회

	//API 호출
	this.gfn_callService(sSvcID, sURL, sInDatasets, sOutDatasets, sArgument, sCallbackFunc, sTranType);
}


/* Validtaion Check Master */
this.fn_validationMaster = function()
{
	/*
    var_dlvpnsht_temp_yn
		(X : 미작성, Y : 임시저장, N : 작성완료, E : 무발주)
	*/

	if (this.gfn_isNull(this.edt_orpl_na_trpl_c.value)) {
		alert("실발주처를 검색해 주세요");
		return false;
	}

	if (var_dlvpnsht_temp_yn == "X") {
		this.fn_baljuValidation();
	}

	if (var_dlvpnsht_temp_yn == "Y") {
		this.fn_baesongValidation();
	}

	if (var_cser_ctr_tpc == "1" && var_prgr_c == "00") {
        alert("실발주처의 가격군코드[00]이면 무발주로 작성할 수 없습니다.");
        return false;
    }
	if (this.gfn_isNull(this.edt_orpl_na_trpl_c.value)) {
		alert("발주처를 선택해 주세요");
		return false;
	}
	/**
	//직송일 경우 매취/수탁 구분이 넘어가지 않으므로 밸리데이션 체크를 뺀다.
	if (this.gfn_isNull(this.cbo_slgt_etr_dsc.value)) {
		alert("매취수탁구분을 선택해 주세요");
		return false;
	}

	/*if (this.gfn_isNull(this.cbo_vhcno.value)) {
		alert("배송차량번호를 선택해 주세요");
		return false;
	}*/

	/* 20151123 경통 확인 불가로 삭제함
	if (this.rdo_dvy_vhc_dsc.value == "1") {
		if (this.gfn_isNull(this.mae_dvy_far_astcs.value) || this.gfn_getNum(this.gfn_nullToEmpty(this.mae_dvy_far_astcs.value)) == 0) {
			alert("운임보조비를 입력해 주 세요");
			return false;
		}
	}
	*/

	var  delCnt = 0;
	for (var i = 0; i < this.ds_dataD.rowcount; i++) {
		if (this.ds_dataD.getColumn(i, "DEL_YN") == '1') {
			++delCnt;
		}
	}
	if (this.ds_dataD.rowcount == delCnt) {
		alert("최소 1개 이상 상품이 있어야 합니다.");
		return false;
	}

	var  odrPcsCnt = 0;
	for (var i = 0; i < this.ds_dataD.rowcount; i++) {
		if ((this.ds_dataD.getColumn(i, "ODR_PCS")  == '0') && (this.ds_dataD.getColumn(i, "DEL_YN") != '1')) {
			++odrPcsCnt;
		}
	}
	if (odrPcsCnt > 0) {
		alert("단가 정보가 없는 상품이 존재합니다.");
		return false;
	}

	var  dvyPlaQtCnt = 0;
	if (this.edt_na_dvy_plash_slpno.value != '') {
		for (var i = 0; i < this.ds_dataD.rowcount; i++) {
			if ((this.ds_dataD.getColumn(i, "DVY_PLA_QT")  == '0') && (this.ds_dataD.getColumn(i, "DEL_YN") != '1')) {
				++dvyPlaQtCnt;
			}
		}
		if (dvyPlaQtCnt > 0 && this.ds_dataD.rowcount == dvyPlaQtCnt) {
			alert("전체 상품의 배송 예정량이 0입니다.\n발주처에 문의 바랍니다.");
			return false;
		}
	}
	return true;
}

/* 저장 */
this.fn_save = function()
{
	var dsParams = "";
	var params = "";
	var temp_yn = this.gfn_nullToEmpty(this.chk_temp_yn.value);
	if (temp_yn == "") {
		temp_yn = "N";
	}

	this.ds_dataM.setColumn(0, "TEMP_YN", temp_yn);

	/*
	var total_vcbt_am = 0;
	var total_vcbx_am = 0;
	var total_dvy_ssdy = 0;

	for (var i = 0; i < this.ds_dataD.rowcount; i++) {
		total_vcbt_am = total_vcbt_am + this.ds_dataD.getColumn(i, "VCBT_AM");//공병금액
		total_vcbx_am = total_vcbx_am + this.ds_dataD.getColumn(i, "VCBX_AM");//공상자금액
		total_dvy_ssdy = total_dvy_ssdy + (this.gfn_getNum(this.ds_dataD.getColumn(i, "SSDY_BAS_AM")) * this.gfn_getNum(this.ds_dataD.getColumn(i, "DVY_PlA_QT")));
	}

	this.mae_total_vcbt_am.set_value(total_vcbt_am);
	this.mae_total_vcbx_am.set_value(total_vcbx_am);
	this.mae_total_dvy_ssdy.set_value(total_dvy_ssdy);

	*/

	if (var_dlvpnsht_temp_yn == "Y" || var_dlvpnsht_temp_yn == "N") {//임시저장, 작성완료
		params = " editType="+var_dlvpnsht_temp_yn
				 + " spypl_na_trpl_c=" + var_spypl_na_trpl_c
				 + " dvyaa_na_trpl_c=" + var_dvyaa_na_trpl_c
				 + " na_dvy_plash_slpno=" + var_na_dvy_plash_slpno
				 + " temp_yn=" +  temp_yn;

	} else {
		params = " editType="+var_dlvpnsht_temp_yn
				+ " orpl_na_trpl_c=" + this.gfn_nullToEmpty(this.edt_orpl_na_trpl_c.value)
				+ " temp_yn=" +  temp_yn
				+ " trplC=" + this.gfn_nullToEmpty(this.getTrplCode());
	}

	this.ds_dataM.addColumn("DDLY_YN", "string", 1);
	this.ds_dataM.setColumn(0, "DDLY_YN", "1");
	params = params + " isDirectNotcieOrder=Y";

	//trace("[ fn_save Params ] >>>>>> " + params);
	dsParams = "ds_dataM=ds_dataM:A ds_dataD=ds_dataD:A";

	// trace("save : " + this.ds_dataM.saveXML());
	this.btn_save.set_enable(false);

	var sSvcID        = "saveDeliveryNoticeOrder";//통신아이디
	var sURL          = "svc::/rest/scm/delivery/saveDeliveryNoticeOrder";// 호출할 서버 페이지 주소
	var sInDatasets   = dsParams;//보내는데이터셋
	var sOutDatasets  = "";	//화면에서 받는 데이터셋=보낸이름(1대1 맵핑)
	var sArgument     = params;// 파라미터
	var sCallbackFunc = "fn_callBack";//콜백
	var sTranType     = "S"; // U:저장/삭제, S:조회

	//API 호출
	this.gfn_callService(sSvcID, sURL, sInDatasets, sOutDatasets, sArgument, sCallbackFunc, sTranType);
}

/* 배송차량구분에 따른 운임보조비 활성화 여부 */
this.fn_dvy_far_astcsEnable = function(flag)
{
	this.mae_dvy_far_astcs.set_enable(flag);
}

this.btn_popup01_onclick = function(obj:Button, e:nexacro.ClickEventInfo)
{
	var trplC = this.getTrplCode();//권한사업장
	var oArg = {trplC:trplC, ddly_yn:'1', temp_yn:''};
	var sOption = "autosize=true, title=false";
	var sPopupCallBack = "fn_popupAfter";
	this.gfn_openPopup("deliveryNoticePopup", "SCM.DELIVERY::VAN_DS_SC_0370_P01.xfdl", oArg, sOption, sPopupCallBack);
}

this.fn_getBizDt = function(trplO, teamO, trplR, teamR, dvy_pla_dt)
{
	trace("배송예정일자 리드타임 적용 시작");
	var params =   " trplO=" + trplO
				 + " teamO=" + teamO
				 + " trplR=" + trplR
				 + " teamR=" + teamR
				 + " dvy_pla_dt=" + dvy_pla_dt;


	var sSvcID        = "getBizDt";//통신아이디
	var sURL          = "svc::/rest/scm/delivery/getBizDt";// 호출할 서버 페이지 주소
	var sInDatasets   = "";//보내는데이터셋
	var sOutDatasets  = "ds_bizDtYn=ds_bizDtYn";	//화면에서 받는 데이터셋=보낸이름(1대1 맵핑)
	var sArgument     = params;// 파라미터
	var sCallbackFunc = "fn_callBack";//콜백
	var sTranType     = "S"; // U:저장/삭제, S:조회
	//API 호출
	this.gfn_callService(sSvcID, sURL, sInDatasets, sOutDatasets, sArgument, sCallbackFunc, sTranType);
}

this.fn_popupAfter = function(strId, strVal)
{
	// trace(" strId : " + strId + " strVal : " + strVal);

	/* 팝업 발주서 조회 */
	if (strId == "retrieveOrdersPopUp") {
		if (strVal == undefined) {
			return;
		}
		var paramsArr = strVal.split(",");

		var_odrpl_na_trpl_c 	= paramsArr[0];
		var_odrpl_na_team_c 	= paramsArr[1];
		var_odr_dt 				= paramsArr[2];
		var_odr_slpno			= paramsArr[3];

		this.ds_dataM.setColumn(0, "ODRPL_NA_TRPL_C", var_odrpl_na_trpl_c);
		this.ds_dataM.setColumn(0, "ODRPL_NA_TEAM_C", var_odrpl_na_team_c);
		this.ds_dataM.setColumn(0, "ODR_DT", var_odr_dt);
		this.ds_dataM.setColumn(0, "ODR_SLPNO", var_odr_slpno);

		var_dlvpnsht_temp_yn	= paramsArr[4];//'X' Fixed 배송예정서 작성여부
		var_spypl_na_trpl_c		= paramsArr[5];
		var_spypl_na_team_c		= paramsArr[6];
		var_dvyaa_na_trpl_c		= paramsArr[7];
		var_dvyaa_na_team_c		= paramsArr[8];
		var_ddly_yn 			= paramsArr[9];
		var_cser_ctr_tpc 		= paramsArr[10];
		var_prgr_c 				= paramsArr[11];
		var_cser_na_usr_sys_kdc = paramsArr[12];
		var_spy_tpc				= paramsArr[13];

		this.cbo_spy_tpc.set_enable(false);//공급유형
		this.cbo_cser_ctr_tpc.set_enable(false);//계약유형
		this.btn_popup01.set_enable(false);//배송예정서 팝업비활성화
		this.fn_search();
	}

	/* 팝업 배송예정서 조회 */
	if (strId == "deliveryNoticePopup") {
		if (strVal == undefined) {
			return;
		}
		var paramsArr = strVal.split(",");

		var_spypl_na_trpl_c 		= paramsArr[0];
		var_dvyaa_na_trpl_c 		= paramsArr[1];
		var_na_dvy_plash_slpno 		= paramsArr[2];
		var_dlvpnsht_temp_yn 		= paramsArr[3];//N, Y 배송예정서 작성여부
		var_ddly_yn 				= paramsArr[4];
		var_prgr_c 					= paramsArr[5];
		var_cser_na_usr_sys_kdc 	= paramsArr[6];
		var_cser_ctr_tpc 			= paramsArr[7];
		var_dvy_pla_dt 			= paramsArr[10];

		this.btn_pup_van_seq.set_enable(false);//발주번호조회 팝업 비활성화
		this.btn_popup.set_enable(false);//발주처 조회 팝업 비활성화
		this.cbo_cser_ctr_tpc.set_enable(false);
		this.edt_orpl_na_trpl_c.set_enable(false);
		this.edt_shrt_bzplnm.set_enable(false);
		this.cal_dvy_pla_dt.set_readonly(true);	// 배송예정일자
		this.fn_search();
	}

	if (strId == "POPUP_TRNREL_ODRPL_RVOPL") {
		if (strVal == undefined) {
			this.ds_dataM.setColumn(0, "RVOPL_NA_TRPL_C", '');
			this.div_auth.set_enable(true);
			this.cbo_tc.set_value('');
			this.cbo_tc.set_enable(true);
			return;
		}

		var valueArr = strVal.split(",");

		var_odrpl_na_trpl_c 	= valueArr[0];
		var_odrpl_na_team_c 	= valueArr[2];
		var_prgr_c 				= valueArr[4];//가격군코드
		var_cser_na_usr_sys_kdc = valueArr[5];//발주처시스템코드
		var_cser_ctr_tpc 		= valueArr[6];//계약유형코드
		var_ldtm_dds			= valueArr[17];//리드타임일수
		this.edt_pgnm.set_value(valueArr[21]);//가격군명

		this.ds_dataM.setColumn(0, "CSER_CTR_TPC", var_cser_ctr_tpc);
		this.ds_dataM.setColumn(0, "SPY_TPC", valueArr[14]);
		this.ds_dataM.setColumn(0, "NA_WRS_LCLC", valueArr[12]);
		this.ds_dataM.setColumn(0, "NA_WRS_MCLC", valueArr[13]);
		this.ds_dataM.setColumn(0, "MNGT_NA_TRPL_C", valueArr[7]);
		this.ds_dataM.setColumn(0, "MNGT_NA_TEAM_C", valueArr[8]);
		this.ds_dataM.setColumn(0, "MNGT_NA_TR_TPC", valueArr[9]);
		this.ds_dataM.setColumn(0, "ADJPL_NA_TRPL_C", valueArr[10]);
		this.ds_dataM.setColumn(0, "ADJPL_NA_TEAM_C", valueArr[11]);
		this.ds_dataM.setColumn(0, "MNGT_TR_REL_AMNNO", valueArr[18]);
		this.ds_dataM.setColumn(0, "CSER_TR_REL_AMNNO", valueArr[19]);
		this.ds_dataM.setColumn(0, "SPYPL_NA_TRPL_C", valueArr[15]);
		this.ds_dataM.setColumn(0, "SPYPL_NA_TEAM_C", valueArr[16]);
		var_rots_flex_pr_apl_yn = valueArr[25];

		this.edt_dvyaa_na_trpl_c.set_value(var_odrpl_na_trpl_c);
		this.edt_dvyaa_na_team_c.set_value(var_odrpl_na_team_c);

		//trace("발주처 팝업 조회 : " + this.ds_dataM.saveXML());

		//this.cbo_tc.set_enable(true);
	}

	/* 팝업 발주처 조회 */
	if (strId == "POPUP_TRNREL_ODRPL") {
		if (strVal == undefined) {
			return;
		}

		var valueArr = strVal.split(",");
		var_odrpl_na_trpl_c 	= valueArr[0];
		var_odrpl_na_team_c 	= valueArr[2];
		var_cser_na_usr_sys_kdc = valueArr[5];//발주처시스템코드
		var_cser_ctr_tpc  = valueArr[6];
		var_prgr_c = valueArr[4];

		this.edt_shrt_bzplnm.set_value(valueArr[1]);
		this.edt_teamnm.set_value(valueArr[3]);

		this.edt_orpl_na_trpl_c.set_value(var_odrpl_na_trpl_c);
		this.edt_orpl_na_team_c.set_value(var_odrpl_na_team_c);
		this.ds_dataM.setColumn(0, "ODRPL_NA_TRPL_C", var_odrpl_na_trpl_c);
		this.ds_dataM.setColumn(0, "ODRPL_NA_TEAM_C", var_odrpl_na_team_c);

		this.ds_dataM.setColumn(0, "ADJPL_NA_TRPL_C", valueArr[10]);
		this.ds_dataM.setColumn(0, "ADJPL_NA_TEAM_C", valueArr[11]);

		this.ds_dataM.setColumn(0, "MNGT_NA_TRPL_C", valueArr[7]);
		this.ds_dataM.setColumn(0, "MNGT_NA_TEAM_C", valueArr[8]);
		this.ds_dataM.setColumn(0, "MNGT_NA_TR_TP", valueArr[9]);

		this.edt_dvyaa_na_trpl_c.set_value(var_odrpl_na_trpl_c);
		this.edt_dvyaa_na_team_c.set_value(var_odrpl_na_team_c);

		//this.fn_getBizDt(valueArr[0], valueArr[2], this.gfn_nullToEmpty(this.getTrplCode()), '00', this.cal_dvy_pla_dt.value);

		trace("발주처 팝업 조회");
		this.btn_popup.set_enable(false);
		this.edt_orpl_na_trpl_c.set_enable(false);
		this.edt_shrt_bzplnm.set_enable(false);
		this.fn_trnrelSet(valueArr);//거래관계 Set
	}

	/* 팝업 배송지 조회 */
	if (strId == "VAN_DS_SC_0100_P01") {
		var paramsArr = strVal.split(",");
		this.edt_dvyaa_n.set_value(paramsArr[0]);
		this.edt_dvyaa_na_trpl_c.set_value(this.gfn_nullToEmpty(this.edt_orpl_na_trpl_c.value));
		this.edt_dvyaa_na_team_c.set_value(this.gfn_nullToEmpty(this.edt_orpl_na_team_c.value));
	}

	// 배송예정서 작성 완료인 경우
	if (strId == "deliveryNoticePopup") {
		var objArr;
		if (var_dlvpnsht_temp_yn == "N") {
			objArr = 	[
							 "btn_rowUpdate"
							, "btn_clear"
							, "cal_dvy_pla_dt"
							, "cbo_slgt_etr_dsc"
							, "cbo_vhcno"
							, "mae_dvy_far_astcs"
							, "chk_temp_yn"
							, "cbo_tc"
							, "btn_popup01"
							];
			this.btn_save.set_enable(false);
		} else {
			objArr = 	[

							"cbo_slgt_etr_dsc"
							, "cbo_vhcno"
							, "mae_dvy_far_astcs"
							, "cbo_tc"
							, "btn_popup01"
						];
		}
		this.fn_enable(objArr, false);
	}

	if (strId == "wrsSearchPop") {
		var paramsArr = strVal.split(",");
		var na_wrs_c 			= paramsArr[0];
		var wrsnm 				= paramsArr[1];
		var boxpe_aqz 			= paramsArr[2];
		var wrs_stdnm 			= paramsArr[3];
		var na_wrs_std_unt_c 	= paramsArr[4];
		var odr_pcs 			= paramsArr[5];
		var vcbt_upr 			= paramsArr[7];
		var vcbx_upr 			= paramsArr[8];
		var txt_dsc 			= paramsArr[9];
		var pd_yy_amn_yn		= paramsArr[10];
		var pd_yy				= paramsArr[11];
		var_na_wrs_lclc 		= paramsArr[12];
		var_na_wrs_mclc 		= paramsArr[13];
		var_na_wrs_sclc 		= paramsArr[14];
		var_na_wrs_dtcf_c 		= paramsArr[15];
		ddly_st_dt				= paramsArr[16];
		ddly_ed_dt				= paramsArr[17];
		ddly_bas_qt				= paramsArr[18];
		min_order_qt			= paramsArr[19];
		max_order_qt 			= paramsArr[20];
		var_vcbt_na_wrs_c		= paramsArr[21];
		var vcbt_qt				= paramsArr[23];//공병수량

		this.edt_na_wrs_c.set_value(na_wrs_c);
		this.edt_wrsnm.set_value(wrsnm);
		this.mae_boxpe_aqz.set_value(boxpe_aqz);
		this.edt_wrs_stdnm.set_value(wrs_stdnm);
		this.edt_na_wrs_unt_c.set_value(na_wrs_std_unt_c);
		this.mae_odr_pcs.set_value(odr_pcs);
		this.mae_vcbt_upr.set_value(vcbt_upr);
		this.mae_vcbx_upr.set_value(vcbx_upr);
		this.mae_dvy_wrs_upr.set_value(odr_pcs);
		this.edt_txt_dsc.set_value(txt_dsc);
		this.edt_pd_yy_amn_yn.set_value(pd_yy_amn_yn);
		this.edt_pd_yy.set_value(pd_yy);
		this.mae_dvy_pla_qt.set_value(0);
		this.edt_min_odr_qt.set_value(min_order_qt);
		this.edt_vcbt_na_wrs_c.set_value(var_vcbt_na_wrs_c);
		this.edt_ddly_st_dt.set_value(ddly_st_dt);
		this.edt_ddly_ed_dt.set_value(ddly_ed_dt);
		this.edt_na_wrs_c.set_enable(false);
		this.edt_wrsnm.set_enable(false);
		this.edt_vcbt_qt.set_value(vcbt_qt);
		this.mae_dvy_pla_qt.setFocus();
		this.mae_dvy_pla_qt.setCaretPos(-1);
		if (var_rots_flex_pr_apl_yn == "1") {//납품단가 비활성화
			this.mae_dvy_wrs_upr.set_enable(true);
		}

		for (var i=0;i<this.grd_master.rowcount;i++) {
			var na_wrs_c = this.ds_dataD.getColumn(i, "NA_WRS_C");
			if (na_wrs_c == this.edt_na_wrs_c.value) {
				this.fn_rowSet(i);//상품이 있을 경우 text set
			}
		}
	}
}

this.fn_rowSet = function(row)
{
	this.ds_dataD.set_rowposition(row);
	this.edt_na_wrs_c.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "NA_WRS_C")));
	this.edt_wrsnm.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "WRSNM")));
	this.mae_boxpe_aqz.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "BOXPE_AQZ")));
	this.edt_wrs_stdnm.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "WRS_STDNM")));
	this.edt_na_wrs_unt_c.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "NA_WRS_UNT_C")));
	this.mae_odr_qt.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "ODR_QT")));
	this.mae_odr_pcs.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "ODR_PCS")));
	this.mae_odr_vat.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "ODR_VAT")));
	this.mae_odr_am.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "ODR_AM")));
	this.chk_del_yn.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "DEL_YN")));
	this.mae_dvy_pla_qt.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "DVY_PLA_QT")));
	this.cbo_dqpd_rsnc.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "DQPD_RSNC")));
	this.mae_dvy_wrs_upr.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "DVY_WRS_UPR")));
	this.mae_vcbt_upr.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "VCBT_UPR")));
	this.mae_vcbx_upr.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "VCBX_UPR")));
	this.cal_spy_psb_dt.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "SPY_PSB_DT")));
	this.edt_txt_dsc.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "TXT_DSC")));
	this.edt_ddly_st_dt.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "DDLY_ST_DT")));
	this.edt_ddly_ed_dt.set_value(this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "DDLY_ED_DT")));
	this.edt_vcbt_qt.set_value(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "VCBT_QT"));
	ddly_st_dt 			= this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "DDLY_ST_DT"));
	ddly_ed_dt 			= this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "DDLY_ED_DT"));
	ddly_bat_dt 		= this.gfn_getNum(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "DDLY_BAT_QT"));
	this.edt_min_odr_qt.set_value(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "MIN_ODR_QT"));
	var_vcbt_na_wrs_c 	= this.gfn_nullToEmpty(this.ds_dataD.getColumn(this.ds_dataD.rowposition, "VCBT_NA_WRS_C"));

	this.edt_na_wrs_c.set_enable(false);
	this.edt_wrsnm.set_enable(false);

	//trace(this.ds_dataD.saveXML());
// 	trace("ddly_st_dt 	: " + ddly_st_dt);
// 	trace("ddly_ed_dt 	: " + ddly_ed_dt);
// 	trace("ddly_bat_dt 	: " + ddly_bat_dt);
// 	trace("min_odr_qt 	: " + min_odr_qt);
// 	trace("max_odr_qt 	: " + max_odr_qt);
// 	trace("var_vcbt_na_wrs_c 	: " + var_vcbt_na_wrs_c);

	this.mae_dvy_pla_qt.setFocus();
}

//거래관계 Set
this.fn_trnrelSet = function(valueArr)
{
	trnrelParams = {
		in_BsDay 	: "", 			//1.기준일자
		in_TrplR 	: valueArr[15], // 2.[거래관계]수주처
		in_TeamR 	: valueArr[16], // 3.[거래관계]수주처팀
		in_TrplO  	: valueArr[0 ], 	// 4.[거래관계]발주처
		in_TeamO  	: valueArr[2 ], 	// 5.[거래관계]발주처팀
		in_TrplM  	: valueArr[7 ], 	// 5.[거래관계]주관사업장
		in_TeamM 	: valueArr[8 ], // 6.[거래관계]주관사업장팀
		in_CtrTpc 	: valueArr[6], 	// 7.[거래관계]수요자계약유형
		in_SpyTpc 	: valueArr[14], 	// 8.[거래관계]공급유형코드
		in_TrTpcM 	: valueArr[9 ], 	// 9.[거래관계]주관경제통합거래유형
		in_WrsC   	: "", 			//10.상품코드
		in_Year  	: "0000", 			//11.생산년도      (가공사업/유통양곡)
		in_UseSysR 	: valueArr[23], 	//12.[수주처]사용시스템
		in_UseSysO 	: valueArr[5 ], 	//13.[발주처]사용시스템
		in_UseSysM 	: valueArr[24], 	//14.[주관처]사용시스템
		in_DdlyYN	: "1"				//15.직송여부
	}
}

//발주서 Validation
this.fn_baljuValidation = function()
{
	/*
	var cbo_cser_ctr_tpc = this.gfn_nullToEmpty(this.cbo_cser_ctr_tpc.value);//계약유형
	var cbo_spy_tpc = this.gfn_nullToEmpty(this.cbo_spy_tpc.value);//공급유형


	if ((var_cser_ctr_tpc.length > 0) && (var_cser_ctr_tpc != cbo_cser_ctr_tpc)) {
       alert('발주처에서 선택한 계약유형 ['+var_cser_ctr_tpc+']와 \n'
            +'발주전표에서 전송한 계약유형 ['+cbo_cser_ctr_tpc+'] \n'
            +'이 상이합니다.거래관계를 다시 선택하세요.');
       return false;
    }

    if ((var_spy_tpc.length > 0) && (var_spy_tpc != cbo_spy_tpc)) {
       alert('발주처에서 선택한 공급유형 ['+var_spy_tpc+']와 \n'
            +'발주전표에서 전송한 공급유형 ['+cbo_spy_tpc+'] \n'
            +'이 상이합니다.거래관계를 다시 선택하세요.');
       return (false);
    }
    */
    // trace("발주전표 Validtaion OK");
}

//배송예정번호 Validation
this.fn_baesongValidation = function()
{
/*
	 if ((var_cser_ctr_tpc == "1") && (var_ddly_yn == "1")) {
			alert("배송예정서 직송인 경우에는 직송 배송예정서 작성에서 하십시오.");
			return false;
	}
*/
	// trace("배송예정서 Validtaion OK");
}

//배송예정서 조회 후 거래관계 Set
this.fn_trnrel = function()
{
	trace("거래관계 Set 시작");
	var odrpl_na_trpl_c = this.ds_dataM.getColumn(0, "ODRPL_NA_TRPL_C");
	var odrpl_na_team_c = this.ds_dataM.getColumn(0, "ODRPL_NA_TEAM_C");
	var spypl_na_trpl_c = this.ds_dataM.getColumn(0, "RVOPL_NA_TRPL_C");
	var spypl_na_team_c = this.ds_dataM.getColumn(0, "RVOPL_NA_TEAM_C");
	var cser_ctr_tpc 	= this.ds_dataM.getColumn(0, "CSER_CTR_TPC");

	var params = "odrpl_na_trpl_c=" + odrpl_na_trpl_c
				+" odrpl_na_team_c=" + odrpl_na_team_c
				+" spypl_na_trpl_c=" + spypl_na_trpl_c
				+" spypl_na_team_c=" + spypl_na_team_c
				+" cser_ctr_tpc=" + '1';
	// trace("거래관계 PARAMS : " + params);

	var sSvcID        = "getTrnrel";//통신아이디
	var sURL          = "svc::/rest/scm/order/getTrnrel";// 호출할 서버 페이지 주소
	var sInDatasets   = "";//보내는데이터셋
	var sOutDatasets  = "ds_trnrel=ds_trnrel";	//화면에서 받는 데이터셋=보낸이름(1대1 맵핑)
	var sArgument     = params;// 파라미터
	var sCallbackFunc = "fn_callBack";//콜백
	var sTranType     = "S"; // U:저장/삭제, S:조회
	//API 호출
	this.gfn_callService(sSvcID, sURL, sInDatasets, sOutDatasets, sArgument, sCallbackFunc, sTranType);
}

this.fn_enable = function(objArr, flag)
{
	for (var i = 0; i < objArr.length; i++) {
		eval("this."+objArr[i]+".set_enable("+flag+")");
	}
}

/* Call Back */
this.fn_callBack = function(svcID, ErrorCode, ErrorMsg)
{
	if (ErrorCode < 0) {
		if (ErrorCode == "-99") {
			if (svcID == "getBizDtYn") {
				alert("입력하신 배송예정일은 휴무 입니다.");
				return;
			}
		} else {
			if (ErrorCode == "-999") {
				this.alert(ErrorMsg);
				this.btn_save.set_enable(true);
			} else if (svcID == "retrieveTC") {
				var msg = "공급처 ["+ ErrorMsg +"]와 거래관계 등록된 직송 사업장이 없습니다. 담당 바이어에게 문의하시기 바랍니다."
				alert(msg);
				this.ds_dataTC.clearData();
			} else {
				this.gfn_getMessage("alert", "error.message.server.exception");
			}
			return;
		}
	} else {
		if (svcID == "getOrder") {
			this.ds_dataD.set_rowposition(-1);
			this.fn_trnrel();//거래관계 SET
			var today = this.gfn_today('yyyyMMdd');
			/* #################################### init Set Start ##############################################*/
			if (this.gfn_isNull(this.ds_dataM.getColumn(0, "DVY_PLA_DT"))) {
				this.ds_dataM.setColumn(0, "DVY_PLA_DT", this.gfn_addDate(today, 1));
			} else {
				var trplO = this.ds_dataM.getColumn(0, "ODRPL_NA_TRPL_C");
				var teamO = this.ds_dataM.getColumn(0, "ODRPL_NA_TEAM_C");
				var trplR = this.ds_dataM.getColumn(0, "RVOPL_NA_TRPL_C");
				var teamR = this.ds_dataM.getColumn(0, "RVOPL_NA_TEAM_C");
				var dvy_pla_dt = this.ds_dataM.getColumn(0, "DVY_PLA_DT");
				this.fn_getBizDt(trplO, teamO, trplR, teamR, dvy_pla_dt);

				this.ds_dataM.setColumn(0, "DVY_PLA_DT", this.ds_bizDtYn.getColumn(0, "BIZDT"));
			}

			if (this.gfn_isNull(this.ds_dataM.getColumn(0, "SLGT_ETR_DSC"))) {
				this.ds_dataM.setColumn(0, "SLGT_ETR_DSC", "1");
			}
			this.sta_grd_master_cnt.set_text(this.ds_dataD.rowcount); //Row Count Setting
			this.fn_rdo_dvy_vhc_dsc();//배송차량구분에 따른 운임보조비활성여부
			var_rots_flex_pr_apl_yn = this.ds_dataM.getColumn(0, "ROTS_FLEX_PR_APL_YN");//탄력가격적용여부
			/* #################################### init Set End ##############################################*/
			this.edt_orpl_na_trpl_c.set_enable(false);
			this.edt_shrt_bzplnm.set_enable(false);

			if (this.ds_dataM.rowcount == 0) {
				this.gfn_getMessage("alert", "result.message.search.no.exist.data");
			}
			this.fn_init();//상품정보 박스 초기화
		}

		if (svcID == "saveDeliveryNoticeOrder") {
			/*
			var tempYn = this.gfn_nullToEmpty(this.chk_temp_yn.value);
			var msgArr = ErrorMsg.split(', ');
			if (msgArr.length == 3) {
				var_spypl_na_trpl_c 	= msgArr[0];
				var_dvyaa_na_trpl_c 	= msgArr[1];
				var_na_dvy_plash_slpno 	= msgArr[2];
				var strRtn = this.gfn_getMessage("confirm", "msg.van_ds_sc_0300.trading.statments.print.yn", var_na_dvy_plash_slpno);
				if (strRtn == true) {
					this.fn_print();
				}
			} else {
				alert(ErrorMsg);
			}
			this.reload();
			*/
			var msgArr = ErrorMsg.split(';');
			var strRtn = this.confirm(msgArr[0]);

			var_spypl_na_trpl_c 	= msgArr[1]
			var_dvyaa_na_trpl_c 	= msgArr[2]
			var_na_dvy_plash_slpno 	= msgArr[3];
			if (strRtn == true) {
				this.fn_beForPrint();
				//this.fn_print();
			} else {
				this.reload();
			}
		}

		if (svcID == "getDeliveryNoticeOrder") {
			this.ds_dataD.set_rowposition(-1);
			this.fn_trnrel();//거래관계 SET
			this.sta_grd_master_cnt.set_text(this.ds_dataD.rowcount); //Row Count Setting
			this.fn_rdo_dvy_vhc_dsc();//배송차량구분에 따른 운임보조비활성여부
			var dvyPlashStsc = this.ds_dataM.getColumn(0, "DVY_PLASH_STSC");
			var prcYn = this.ds_dataM.getColumn(0, "PRC_YN");
			var tempYn = this.ds_dataM.getColumn(0, "TEMP_YN");
			var norderYn = this.gfn_nullToEmpty(this.ds_dataM.getColumn(0, "NORDER_YN"));

// 			trace("배송예정서 상태 : " + dvyPlashStsc);
// 			trace("PRC_YN : " + prcYn);
// 			trace("임시저장여부 : " + tempYn);
// 			trace("무발주배송예정서여부 : " + norderYn);
			this.cal_odr_dt.set_value(this.ds_dataD.getColumn(0, "ODR_DT"));
			this.edt_odr_slpno.set_value(this.ds_dataD.getColumn(0, "ODR_SLPNO"));

			if (norderYn == "0" || norderYn == "") {
				this.grd_master.setRealColSize(17, 0);
			}

			//if (dvyPlashStsc == "01" && prcYn == "R" && tempYn == "N") {
			if (dvyPlashStsc == "01" && (prcYn == "R" || prcYn == "Y") && tempYn == "N") {
				this.btn_save.set_enable(true);
				this.btn_cancle.set_enable(true);
				this.fn_enable(objArr, true);
				this.cal_dvy_pla_dt.set_enable(false);	// 배송예정일 비활성화
			} else {
				this.fn_odr_pcs_change();
			}
			this.div_auth.set_enable(false);
			this.cbo_tc.set_enable(false);
			this.fn_sum();//Detail Sum
			this.fn_init();//상품정보 박스 초기화
		}

		if (svcID == "getBuyer") {
			var msg = "N:단가미등록(수) 상품입니다.\n"
			+ " 해당 상품은 농협하나로마트 담당바이어에게 연락하시기 바랍니다.\n"
			+ " 상품코드    : " + this.ds_buyer.getColumn(0, "NA_WRS_C") + "\n"
			+ " 상품코드명 : " + this.ds_buyer.getColumn(0, "NA_WRS_N") + "\n";
			alert(msg);
		}

		if (svcID == "getBizDtYn") {
			if (ErrorCode == "99") {//저장 클릭한 경우
				if (this.fn_validationMaster()) {
					this.fn_save();
				}
			} else {
				this.fn_syncBizDtYn();//배송예정일자 변경시 조회
			}
		}

		if (svcID == "getBizDt") {
			trace("리드타임 적용일자 : " + this.ds_bizDtYn.getColumn(0, "BIZDT"));
			trace("배송예정일자 리드타임 적용 완료");
			//발주서 조회 후 배송예정서 작성 시 리드타임 적용
			this.cal_dvy_pla_dt.set_value(this.ds_bizDtYn.getColumn(0, "BIZDT"));
		}

		if (svcID == "retrieveTC") {
			trace("TC 리스트 Set 완료");
		}

		if (svcID == "deliveryNoticeCancelProc") {
			var na_dvy_plash_slpno = this.ds_dataM.getColumn(0, "NA_DVY_PLASH_SLPNO");
			var trplO 		= this.ds_dataM.getColumn(0, "ODRPL_NA_TRPL_C");
			var trplON 		= this.ds_dataM.getColumn(0, "SHRT_BZPLNM");
			var trplR 		= this.ds_dataM.getColumn(0, "SPYPL_NA_TRPL_C");
			var trplRN 		= this.ds_dataM.getColumn(0, "SPYPL_NA_TRPL_N");
			var dvyPlaDt 	= this.ds_dataM.getOrgColumn(0, "DVY_PLA_DT");

			var msg =    "배송예정서번호 ["+na_dvy_plash_slpno+"] 정상 취소 되었습니다. \n"
						+"발주처 :  " + trplON + "["+trplO+"] \n"
						+"공급처 :  " + trplRN + "["+trplR+"] \n"
						+"배송요청일 : " + this.formatDate("yyyy-MM-dd", dvyPlaDt);
			alert(msg);
			this.btn_save.set_enable(false);
		}

		if (svcID == "getTrnrel") {
			// trace(this.ds_trnrel.saveXML());
			if (this.ds_trnrel.rowcount == 0) {
				alert("거래관계가 존재하지 않습니다.");
				this.reload();
			}
			trnrelParams = {
				in_BsDay 	: "", 			//1.기준일자
				in_TrplR 	: this.ds_trnrel.getColumn(0, "SPLR_NA_TRPL_C"), // 2.[거래관계]수주처
				in_TeamR 	: this.ds_trnrel.getColumn(0, "SPLR_NA_TEAM_C"), // 3.[거래관계]수주처팀
				in_TrplO  	: this.ds_trnrel.getColumn(0, "CSER_NA_TRPL_C"), 	// 4.[거래관계]발주처
				in_TeamO  	: this.ds_trnrel.getColumn(0, "CSER_NA_TEAM_C"), 	// 5.[거래관계]발주처팀
				in_TrplM  	: this.ds_trnrel.getColumn(0, "MNGT_NA_TRPL_C"), 	// 5.[거래관계]주관사업장
				in_TeamM 	: this.ds_trnrel.getColumn(0, "MNGT_NA_TEAM_C"), // 6.[거래관계]주관사업장팀
				in_CtrTpc 	: this.ds_trnrel.getColumn(0, "CSER_CTR_TPC"), 	// 7.[거래관계]수요자계약유형
				in_SpyTpc 	: this.ds_trnrel.getColumn(0, "SPY_TPC"), 	// 8.[거래관계]공급유형코드
				in_TrTpcM 	: this.ds_trnrel.getColumn(0, "MNGT_NA_TR_TPC"), 	// 9.[거래관계]주관경제통합거래유형
				in_WrsC   	: "", 			//10.상품코드
				in_Year  	: "0000", 			//11.생산년도      (가공사업/유통양곡)
				in_UseSysR 	: this.ds_trnrel.getColumn(0, "SPLR_NA_USR_SYS_KDC"), 	//12.[수주처]사용시스템
				in_UseSysO 	: this.ds_trnrel.getColumn(0, "CSER_NA_USR_SYS_KDC"), 	//13.[발주처]사용시스템
				in_UseSysM 	: this.ds_trnrel.getColumn(0, "MNGT_NA_USR_SYS_KDC"), 	//14.[주관처]사용시스템
				in_DdlyYN	: "1"				//15.직송여부
			}
			var_rots_flex_pr_apl_yn = this.ds_trnrel.getColumn(0, "ROTS_FLEX_PR_APL_YN");//탄력가격적용여부
			// trace(this.ds_trnrel.saveXML());
			trace("거래관계 Set 완료");
		}
		if (svcID == "isOKdlvpnsht") {
			this.fn_print();
			if (this.gfn_nullToEmpty(this.edt_na_dvy_plash_slpno.value) == "") {
				this.reload();
			}
		}

		if (svcID == "sessionDeliveryNoticeOrder") {
			this.fn_dvy_save();
		}
	}
}

this.fn_syncBizDtYn = function()
{
	// trace("bizdyYn : " + this.ds_bizDtYn.getColumn(0, "BIZDY_YN"));
	if (this.ds_bizDtYn.getColumn(0, "BIZDY_YN") == "0") {
		//trace(this.ds_bizDtYn.saveXML());
		bizdyYn = "0";
		this.cal_dvy_pla_dt.set_value(preValue);
		var bizDt = this.ds_bizDtYn.getColumn(0, "BIZDT");
		alert("[ "+bizDt.substring(4, 6)+"/"+bizDt.substring(6, 8)+" ] 은 해당 사업장의 휴일입니다.");
	} else {
		bizdyYn = "1";
		trace("배송예정가능일자 가능");
	}

	if (bizdyYn == "1") {
		var tempYn = this.gfn_nullToEmpty(this.ds_dataM.getColumn(0, "TEMP_YN"));
		trace("배송예정일 변경에 따른 단가변경");
		if ((tempYn == '' || tempYn == 'Y' || tempYn =='N') && (postValue != preValue)) {
			if (this.gfn_isNull(this.edt_odr_slpno.value) && this.gfn_isNull(this.edt_na_dvy_plash_slpno.value)) {
				//무발주
				if (this.ds_dataD.rowcount > 0) {
					var isYn = application.confirm("무발주 배송예정서 작성일 경우 배송예정일자가 변경되면 입력하신 상품은 삭제됩니다. 계속진행하시겠습니까?");
					if (isYn) {
						this.ds_dataD.clearData();
						this.fn_detail_clear();
					} else {
						this.cal_dvy_pla_dt.set_value(preValue);
					}
				}
			} else if (this.gfn_isNull(this.edt_odr_slpno.value) == false) {
				//발주참조
				odrpl_na_trpl_c = this.ds_dataM.getColumn(0, "ODRPL_NA_TRPL_C");
				odrpl_na_team_c = this.ds_dataM.getColumn(0, "ODRPL_NA_TEAM_C");
				odr_dt = this.ds_dataM.getColumn(0, "ODR_DT");
				odr_slpno = this.ds_dataM.getColumn(0, "ODR_SLPNO");

				var params =   " odrpl_na_trpl_c=" + odrpl_na_trpl_c
							 + " odrpl_na_team_c=" + odrpl_na_team_c
							 + " odr_dt=" + odr_dt
							 + " odr_slpno=" + odr_slpno
							 + " dvy_pla_dt=" + postValue
							 + " ddly_yn=1";
				var isYn = application.confirm("배송예정일을 변경할 경우 단가정보를 리로드 합니다. 계속 진행하시겠습니까?");
				if (isYn) {
					var sSvcID        = "getOrderDetail";//통신아이디
					var sURL          = "svc::/rest/scm/delivery/getOrderDetail";// 호출할 서버 페이지 주소
					//var sURL          = "svc::/rest/scm/delivery/saveDeliveryNoticeOrder";// 호출할 서버 페이지 주소
					var sInDatasets   = "";//보내는데이터셋
					var sOutDatasets  = "ds_dataD=ds_dataD";	//화면에서 받는 데이터셋=보낸이름(1대1 맵핑)
					var sArgument     = params;// 파라미터
					var sCallbackFunc = "fn_callBack";//콜백
					var sTranType     = "S"; // U:저장/삭제, S:조회
					//API 호출
					this.gfn_callService(sSvcID, sURL, sInDatasets, sOutDatasets, sArgument, sCallbackFunc, sTranType);
					this.fn_detail_clear();
				} else {
					this.cal_dvy_pla_dt.set_value(preValue);
				}

				// trace("발주서 단가 변경 : " + this.ds_dataD.saveXML());

			} else {
				//배송예정서 참조
				spypl_na_trpl_c = this.ds_dataM.getColumn(0, "SPYPL_NA_TRPL_C");
				dvyaa_na_trpl_c = this.ds_dataM.getColumn(0, "DVYAA_NA_TRPL_C");
				na_dvy_plash_slpno = this.ds_dataM.getColumn(0, "NA_DVY_PLASH_SLPNO");
				var cser_ctr_tpc = this.ds_dataM.getColumn(0, "CSER_CTR_TPC");

				var params =      "spypl_na_trpl_c=" + spypl_na_trpl_c
								+ " dvyaa_na_trpl_c=" + dvyaa_na_trpl_c
								+ " na_dvy_plash_slpno=" + na_dvy_plash_slpno
								+ " dvy_pla_dt=" + postValue
								+ " ddly_yn=1"
								+ " cser_ctr_tpc="+cser_ctr_tpc;

				var isYn = application.confirm("배송예정일을 변경할 경우 단가정보를 리로드 합니다. 계속 진행하시겠습니까?");
				if (isYn) {
					var sSvcID        = "getDeliveryNoticeOrderDetail";//통신아이디
					var sURL          = "svc::/rest/scm/delivery/getDeliveryNoticeOrderDetail";// 호출할 서버 페이지 주소
					var sInDatasets   = "";//보내는데이터셋
					var sOutDatasets  = "ds_dataD=ds_dataD";	//화면에서 받는 데이터셋=보낸이름(1대1 맵핑)
					var sArgument     = params;// 파라미터
					var sCallbackFunc = "fn_callBack";//콜백
					var sTranType     = "S"; // U:저장/삭제, S:조회
					//API 호출
					this.gfn_callService(sSvcID, sURL, sInDatasets, sOutDatasets, sArgument, sCallbackFunc, sTranType);
					this.fn_detail_clear();
				} else {
					this.cal_dvy_pla_dt.set_value(preValue);
				}
				// trace("배소예정서 단가 변경 : " + this.ds_dataD.saveXML());
			}
		}
	}
}

//배송차량구분에 따른 운임보조비활성여부
this.fn_rdo_dvy_vhc_dsc = function()
{
	if (this.rdo_dvy_vhc_dsc.value == "1" && var_dlvpnsht_temp_yn == "X") {
		this.fn_dvy_far_astcsEnable(true);
	} else if (this.rdo_dvy_vhc_dsc.value == "1" && var_dlvpnsht_temp_yn == "Y") {
		this.fn_dvy_far_astcsEnable(true);
	} else {
		this.fn_dvy_far_astcsEnable(false);
	}
}

this.Button22_onclick = function(obj:Button, e:nexacro.ClickEventInfo)
{
	var odrpl_na_trpl_c = this.gfn_nullToEmpty(this.edt_orpl_na_trpl_c.value);
	if (odrpl_na_trpl_c == "8808983410142" || odrpl_na_trpl_c == "8808983410159"  || odrpl_na_trpl_c == '8808983324388'
		|| odrpl_na_trpl_c == "8808983326641" || odrpl_na_trpl_c == "8808983326634") {
		alert('축산, 수산 배송예정서 등록 및 거래명세서 출력 업무는 축산, 수산 메뉴를 이용해 주시기 바랍니다.');
		return false;
	}
	this.fn_beForPrint();
}

//거래명세표 출력
this.fn_beForPrint = function()
{
	if (var_spypl_na_trpl_c == "" && var_dvyaa_na_trpl_c == "" && var_na_dvy_plash_slpno == "" && this.gfn_isNull(this.edt_na_dvy_plash_slpno.value)) {
		alert("배송예정서를 입력하세요");
		return false;
	}
	var spypl_na_trpl_c = var_spypl_na_trpl_c;
	var dvyaa_na_trpl_c = var_dvyaa_na_trpl_c;
	var na_dvy_plash_slpno = var_na_dvy_plash_slpno;

	var params =  	"spypl_na_trpl_c=" + spypl_na_trpl_c
				 + 	" dvyaa_na_trpl_c=" + dvyaa_na_trpl_c
				 + 	" na_dvy_plash_slpno=" + na_dvy_plash_slpno;

	var sSvcID        = "isOKdlvpnsht";//통신아이디
	var sURL          = "svc::/rest/scm/delivery/isOKdlvpnsht";// 호출할 서버 페이지 주소
	var sInDatasets   = "";//보내는데이터셋
	var sOutDatasets  = "";	//화면에서 받는 데이터셋=보낸이름(1대1 맵핑)
	var sArgument     = params;// 파라미터
	var sCallbackFunc = "fn_callBack";//콜백
	var sTranType     = "S"; // U:저장/삭제, S:조회

	//API 호출
	this.gfn_callService(sSvcID, sURL, sInDatasets, sOutDatasets, sArgument, sCallbackFunc, sTranType);
}

//거래명세표 출력
this.fn_print = function()
{
	if (var_spypl_na_trpl_c == "" && var_dvyaa_na_trpl_c == "" && var_na_dvy_plash_slpno == "" && this.gfn_isNull(this.edt_na_dvy_plash_slpno.value)) {
		alert("배송예정서를 입력하세요");
		return false;
	}
// 	trace(var_spypl_na_trpl_c)
// 	trace(var_dvyaa_na_trpl_c);
// 	trace(var_na_dvy_plash_slpno);
	var dvy_pla_dt = this.gfn_nullToEmpty(this.ds_dataM.getColumn(0, "DVY_PLA_DT"));
	var sFileName = this.gfn_nullToEmpty(this.ds_uploadresult.getColumn(0, "SYSTEMFILENAME")) //직인파일;

	 var ozParam = {
      sId: 'VAN_DS_SC_0300', 
      sUrl: '/rest/oz/delivery/printDeliveryNoticeOrder', 
      paramType: 'param', 
      sParam: {naDvyPlashSlpno:var_na_dvy_plash_slpno, spyplNaTrplC:var_spypl_na_trpl_c, dvyaaNaTrplC:var_dvyaa_na_trpl_c, systemFileName:sFileName, dvyPlaDt: dvy_pla_dt}
   };
   this.ozViewer(ozParam);
}

/* 발주처 조회 */
this.btn_popup_onclick = function(obj:Button, e:nexacro.ClickEventInfo)
{
	//권한사업장 표시 여부(1:본사)
	/**
	if (application.gv_mbcoType == '5') {
		alert('위탁등록은 배송예정서위탁등록 메뉴를 이용해주십시오.');
		return;
	}
	**/

	if (this.gfn_isNull(this.edt_tc_trpl_c.value)) {
		alert("수주처를 선택해 주세요");
		return false;
	}

	var trplC = this.edt_tc_trpl_c.value;
	var oArg = {form_id:"VAN_DS_SC_0300", trplC:trplC, DSTR_TER_YN:'N'};
	var sOption = "autosize=true, title=false";
	var sPopupCallBack = "fn_popupAfter";
	this.gfn_openPopup("POPUP_TRNREL_ODRPL", "POPUP::POPUP_TRNREL_ODRPL.xfdl", oArg, sOption, sPopupCallBack);
	//this.reload();
}

this.btn_popup02_onclick = function(obj:Button, e:nexacro.ClickEventInfo)
{
	if (this.gfn_isNull(this.edt_orpl_na_trpl_c.value)) {
		alert("발주처를 먼저 선택해 주세요");
		return false;
	}

	var oArg = {form_id:"VAN_DS_SC_0300", odrpl_na_trpl_c:this.edt_orpl_na_trpl_c.value};
	var sOption = "autosize=true, title=false";
	var sPopupCallBack = "fn_popupAfter";
	this.gfn_openPopup("VAN_DS_SC_0100_P01", "SCM.ORDER::VAN_DS_SC_0100_P01.xfdl", oArg, sOption, sPopupCallBack);
}

//상품조회 팝업
this.btn_popup00_onclick = function(obj:Button, e:nexacro.ClickEventInfo)
{
	if (this.gfn_isNull(this.edt_tc_trpl_c.value)) {
		alert("수주처를 먼저 선택해 주세요");
		return false;
	}

	if (this.gfn_isNull(this.edt_orpl_na_trpl_c.value)) {
		alert("발주처를 선택해 주세요");
		return false;
	}

	this.fn_searchWRS("0");
}

/* 사용하지 않음.*/
this.mae_dvy_pla_qt_onkeydown = function(obj:MaskEdit, e:nexacro.KeyEventInfo)
{
	if (e.keycode == "13") {
		this.btn_rowUpdate_onclick();
	} else {
		this.fn_calc_dvy_qt();
		this.detail_VatCalc();
	}
}

//배송예정량수의 금액 계산
this.mae_dvy_pla_qt_ontextchange = function(obj:MaskEdit, e:nexacro.TextChangeEventInfo)
{
	if (e.keycode != "13") {
		this.fn_calc_dvy_qt();
		this.detail_VatCalc();
	}
}

//배송예정량수의 금액 계산
this.mae_dvy_pla_qt_onkeyup = function(obj:MaskEdit, e:nexacro.KeyEventInfo)
{
	var wrsB = false;
	
	// 대용량 설탕인 경우(백설흑설탕15kg 8801007101385 추가. 190322)
	if (this.edt_na_wrs_c.value == '8801007809724' || this.edt_na_wrs_c.value == '8801007101286' || this.edt_na_wrs_c.value == '8801007101385') {
		wrsB = true;
	} else if (this.edt_na_wrs_c.value == '8801013111507' || this.edt_na_wrs_c.value == '8801013121506') {
		wrsB = true;
	} else if (this.edt_na_wrs_c.value == '8801199011011' || this.edt_na_wrs_c.value == '8801199021010') {
		wrsB = true;
	}

	if (wrsB) {
		// 190323 파업대비 설탕 수량체크 해제 (60 > 1)
		if (this.mae_dvy_pla_qt.value >= 1) {
			this.mae_dvy_wrs_upr.set_enable(true);
		} else {
			this.mae_dvy_wrs_upr.set_enable(false);
		}
	}

	if (e.keycode == "13") {
		this.btn_rowUpdate_onclick();
	} else {
		this.fn_calc_dvy_qt();
		this.detail_VatCalc();
	}
}

//배송금액 계산
this.fn_calc_dvy_qt = function()
{
// 	trace("공병수량 : " + this.gfn_nullToEmpty(this.edt_vcbt_qt.value));
// 	trace("배송예정량 : " + this.gfn_nullToEmpty(this.mae_dvy_pla_qt.value));
// 	trace("단가 : " + this.gfn_nullToEmpty(this.mae_dvy_wrs_upr.value));
	var odr_am = this.gfn_nullToEmpty(this.mae_dvy_pla_qt.value) * this.gfn_nullToEmpty(this.mae_dvy_wrs_upr.value);
//	trace(">> 배송금액 계산 : " + odr_am);
	this.mae_odr_am.set_value(odr_am);
}

//배송부가세 계산
this.detail_VatCalc = function()
{
	var dvy_am = this.gfn_nullToEmpty(this.mae_dvy_pla_qt.value) * this.gfn_nullToEmpty(this.mae_dvy_wrs_upr.value);
	if (this.gfn_nullToEmpty(this.edt_txt_dsc.value) == '1') {
		var dvy_vat = this.fCalVat02(dvy_am, 10);
	} else {
		var dvy_vat = 0;
	}
//	trace(">> 배송부가세 계산 : " + dvy_vat);
	this.mae_odr_vat.set_value(dvy_vat);
}

//배송부가세 계산
this.fCalVat02 = function(dvy_am, vatRat)
{
	var lVat;

    dvy_am = this.fParseFloat(dvy_am);
    vatRat = this.fParseFloat(vatRat);
    if ( vatRat ==0 || dvy_am <= 10) return 0;
    lVat = Math.floor(dvy_am/((100+vatRat)/vatRat));
    return lVat;
}

this.fParseFloat = function(txt) {
    var tmpflt= 0.0;
    if (!isNaN(txt) && typeof txt != 'string') return( parseFloat(txt, 10));
    if (isNaN(txt)) tmpflt = parseFloat(txt.delMask(), 10);
    else tmpflt =  parseFloat(txt, 10);
    if (isNaN(tmpflt)) return(0.0)
    else  return( tmpflt);
}

this.btn_help_onclick = function(obj:Button, e:nexacro.ClickEventInfo)
{
	var systemFileName ="DeliveryNoticeB.pdf";
	var fileName = "HelpManual2.pdf";

	var strDownUrl = application.gv_server_url+"rest/common/fileDownload?systemFileName="+systemFileName+"&fileName="+fileName+"&isSampleFile=Y";
	var wbs_dw     = this.gfn_createWebBorwserComponent(this);

	wbs_dw.set_url(strDownUrl);
}

this.cal_dvy_pla_dt_onchanged = function(obj:Calendar, e:nexacro.ChangeEventInfo)
{
	if (this.gfn_isNull(this.edt_tc_trpl_c.value)) {
		alert("수주처를 선택해 주세요");
		return false;
	}
	this.fn_detail_clear();
	var today = this.gfn_today('yyyyMMdd');
// 	trace("post : " + e.postvalue);
// 	trace("pre : " + e.prevalue);
	postValue = e.postvalue;
	preValue = e.prevalue;

	this.fn_BizDtYn("1", preValue, postValue);
}

this.cbo_tc_onitemchanged = function(obj:Combo, e:nexacro.ItemChangeEventInfo)
{
	this.div_auth.set_enable(false);
	this.cbo_tc.set_enable(false);

	var tc = e.postvalue;
	this.edt_tc_trpl_c.set_value(tc);
	this.ds_dataM.setColumn(0, "RVOPL_NA_TRPL_C", tc);
	//this.fn_getBizDt(tc, '00', '', '', this.cal_dvy_pla_dt.value);

	var trpc = this.getTrplCode();//권한사업장
	if (this.gfn_isNull(trpc)) {
		trpc = application.gv_glnCode;
	}

	var oArg = {auto:"1", tc:tc, trplC:trpc};
	var sOption = "autosize=true, title=false";
	var sPopupCallBack = "fn_popupAfter";
	this.gfn_openPopup("POPUP_TRNREL_ODRPL_RVOPL", "POPUP::POPUP_TRNREL_ODRPL.xfdl", oArg, sOption, sPopupCallBack);
}

/*배송예정일자 기준 단가 변경 메세지 처리*/
this.fn_odr_pcs_change = function()
{
	var msg = "기준일자 : [ " + this.ds_dataM.getColumn(0, "DVY_PLA_DT") + " ]\n";
	var changeCnt = 0;
	for (var row=0; row < this.ds_dataD.rowcount; row++) {
		var dvy_pla_dt = this.ds_dataM.getColumn(0, "DVY_PLA_DT");
		var yy = dvy_pla_dt.substring(0, 4);
		var mm = dvy_pla_dt.substring(4, 6);
		var dd = dvy_pla_dt.substring(6, 8);
		dvy_pla_dt = yy + "년" + mm + "월" + dd + "일";
		var na_wrs_c 	= this.ds_dataD.getColumn(row, "NA_WRS_C");
		var wrsnm 		= this.ds_dataD.getColumn(row, "WRSNM");
		var odr_pcs 	= this.gfn_getNum(this.ds_dataD.getColumn(row, "ODR_PCS"));
		var new_odr_pcs = this.gfn_getNum(this.ds_dataD.getColumn(row, "NEW_ODR_PCS"));
		var txt_dsc 	= this.ds_dataD.getColumn(row, "TXT_DSC");
		var dvy_pla_qt 	= this.gfn_getNum(this.ds_dataD.getColumn(row, "DVY_PLA_QT"));
		var dvy_vat 	= 0;
		if (odr_pcs != new_odr_pcs && new_odr_pcs != "99999999") {
			++changeCnt;
			var odr_am = new_odr_pcs * dvy_pla_qt;
			if (txt_dsc == "1") {
				dvy_vat = this.fCalVat02(odr_am, 10);
			} else {
				dvy_vat = 0;
			}

			/*
				2015.12.28
				swha
				발주금지여부 추가
			*/
			var odrFbidYn = this.gfn_nullToEmpty(this.ds_dataD.getColumn(row, "ODR_FBID_YN"));//발주가능여부 1 : 발주금지, 0 : 발주가능
			var odrFbidResultTxt = "";
			if (odrFbidYn == "1") {
				odrFbidResultTxt = "발주상태 : 발주금지";
			}
			this.ds_dataD.setColumn(row, "ODR_VAT", dvy_vat);
			this.ds_dataD.setColumn(row, "ODR_AM", odr_am);
			this.ds_dataD.setColumn(row, "ODR_PCS", new_odr_pcs);
			//this.ds_dataD.setColumn(row, "DVY_WRS_UPR", new_odr_pcs);
			this.detail_sum(row);//total
			msg = 	msg
					+ 	"상품명 : [ " + wrsnm 		+ "] \n"
					+   "상품코드 : [ " + na_wrs_c 	+ "]\n"
					+   "기존상품단가 : [ " + odr_pcs 	+ "] -> 변경상품단가 : [ " + new_odr_pcs	+ " ] \n"
					+ 	odrFbidResultTxt + " \n"
					+ "=====================================\n";
		}
	}
	if (changeCnt > 0) {
		alert(msg);
	}
}

this.fn_sum = function()
{
	var total_am = 0;
	var total_vat = 0;
	for (var i = 0; i < this.ds_dataD.rowcount; i++) {
		if (this.gfn_nullToEmpty(this.ds_dataD.getColumn(i, "DEL_YN")) != "1") {
			total_am 	= total_am + this.gfn_getNum(this.gfn_toString(this.gfn_nullToEmpty(this.ds_dataD.getColumn(i, "ODR_AM"))));
			total_vat 	= total_vat + this.gfn_getNum(this.gfn_toString(this.gfn_nullToEmpty(this.ds_dataD.getColumn(i, "ODR_VAT"))));
		}

	}
	this.ds_dataM.setColumn(0, "TOTAL_DVY_AM", total_am);
	this.ds_dataM.setColumn(0, "TOTAL_DVY_VAT", total_vat);
}

this.btn_cancle_onclick = function(obj:Button, e:nexacro.ClickEventInfo)
{
	var odrpl_na_trpl_c = this.gfn_nullToEmpty(this.edt_orpl_na_trpl_c.value);
	if (odrpl_na_trpl_c == "8808983410142" || odrpl_na_trpl_c == "8808983410159"  || odrpl_na_trpl_c == '8808983324388'
		|| odrpl_na_trpl_c == "8808983326641" || odrpl_na_trpl_c == "8808983326634") {
		alert('축산, 수산 배송예정서 등록 및 거래명세서 출력 업무는 축산, 수산 메뉴를 이용해 주시기 바랍니다.');
		return false;
	}
	var chk = application.confirm("정말 취소하겠습니까? 취소시 해당 발주서는 배송예정서를 작성할 수 없습니다.");
	if (chk) {
		this.fn_cancelProc();
	}
}

this.edt_orpl_na_trpl_c_onkeydown = function(obj:Edit, e:nexacro.KeyEventInfo)
{
	/*
	var trplC = this.edt_tc_trpl_c.value;
	var oArg = {form_id:"VAN_DS_SC_0300", trplC:trplC};
	var sOption = "autosize=true, title=false";
	var sPopupCallBack = "fn_popupAfter";
	this.gfn_openPopup("POPUP_TRNREL_ODRPL", "POPUP::POPUP_TRNREL_ODRPL.xfdl", oArg, sOption, sPopupCallBack);
	*/
	if (e.keycode == '13') {
		if (this.gfn_isNull(this.edt_tc_trpl_c.value)) {
			alert("수주처를 선택해 주세요");
			return false;
		}
		var trplO = this.gfn_nullToEmpty(this.edt_orpl_na_trpl_c.value);
		if (this.gfn_length(trplO) < 6) {
			alert("발주처 코드["+trplO+"] 6자리 이상 입력해 주세요");
			return false;
		}

		var idx = "0";
		var trplO = this.edt_orpl_na_trpl_c.value;

		if (trplO.length == 6) {
			trplO = '8808983' + trplO;
		}

		var trplC = this.edt_tc_trpl_c.value;
		var oArg = {form_id:"VAN_DS_SC_0300", trplC:trplC, idx:idx, auto:"1", trplO:trplO};
		var sOption = "autosize=true, title=false";
		var sPopupCallBack = "fn_popupAfter";
		this.gfn_openPopup("POPUP_TRNREL_ODRPL", "POPUP::POPUP_TRNREL_ODRPL.xfdl", oArg, sOption, sPopupCallBack);
	}
}

this.edt_shrt_bzplnm_onkeydown = function(obj:Edit, e:nexacro.KeyEventInfo)
{
	if (e.keycode == "13") {
		if (this.gfn_isNull(this.edt_tc_trpl_c.value)) {
			alert("수주처를 선택해 주세요");
			return false;
		}
		var trplON = this.edt_shrt_bzplnm.value;
		if (this.gfn_length(trplON) == 0) {
			alert("발주처명["+trplON+"] 을 입력해 주세요");
			return false;
		}

		var idx = "1";
		var trplON = this.edt_shrt_bzplnm.value;
		var trplC = this.edt_tc_trpl_c.value;
		var oArg = {form_id:"VAN_DS_SC_0300", trplC:trplC, idx:idx, auto:"1", trplON:trplON};
		var sOption = "autosize=true, title=false";
		var sPopupCallBack = "fn_popupAfter";
		this.gfn_openPopup("POPUP_TRNREL_ODRPL", "POPUP::POPUP_TRNREL_ODRPL.xfdl", oArg, sOption, sPopupCallBack);
	}
}

this.edt_na_wrs_c_onkeydown = function(obj:Edit, e:nexacro.KeyEventInfo)
{
	if (e.keycode == "13") {
		if (this.gfn_isNull(this.edt_tc_trpl_c.value)) {
			alert("수주처를 먼저 선택해 주세요");
			return false;
		}

		if (this.gfn_isNull(this.edt_orpl_na_trpl_c.value)) {
			alert("발주처를 선택해 주세요");
			return false;
		}
		this.fn_searchWRS("1");
	}
}

this.fn_searchWRS = function(auto)
{
    trace('fn_searchWRS');
	//var odrpl_na_trpl_c = this.gfn_nullToEmpty(this.edt_tc_trpl_c.value);
	//var odrpl_na_team_c = "00";
	//var tc_trpl_c = "";

	var na_wrs_c = this.gfn_nullToEmpty(this.edt_na_wrs_c.value);
	var wrsnm = this.gfn_nullToEmpty(this.edt_wrsnm.value);

	var odrpl_na_trpl_c = this.gfn_nullToEmpty(this.edt_orpl_na_trpl_c.value);
	var odrpl_na_team_c = this.gfn_nullToEmpty(this.edt_orpl_na_team_c.value);
	var trplC =  this.gfn_nullToEmpty(this.edt_tc_trpl_c.value);
	var orginTrplS = this.getTrplCode();//권한사업장


	var chkDate = this.gfn_nullToEmpty(this.ds_dataM.getColumn(0, "DVY_PLA_DT"));
	var idx = "";
	var searchTxt = "";

	if (this.gfn_isNull(this.edt_orpl_na_trpl_c.value)) {
		alert("발주처를 먼저 선택해 주세요");
		return false;
	}

	if (this.gfn_isNull(this.cbo_cser_ctr_tpc.value)) {
		alert("발주["+this.edt_orpl_na_trpl_c.value+"] 거래관계를 확인하세요");
		return false;
	}

	if (this.gfn_length(na_wrs_c) == 6) {
		na_wrs_c = this.edt_pre_cd_good.value + na_wrs_c;
	}

	if (this.gfn_length(na_wrs_c) == 5) {
		na_wrs_c = this.edt_pre_cd_good.value + na_wrs_c;
		var naArr = na_wrs_c.substring(0, 12).split("");
		var v1 = 0;
		var v2 = 0;
		var v3 = 0;
		for (var i=0; i<naArr.length; i++) {
			if (i % 2 == 0) {
				v2 += parseInt(naArr[i]);
			} else {
				v1 += parseInt(naArr[i]);
			}
		}
		v1 = v1 * 3;
		v2 = v1 + v2;
		v3 = 10 - parseInt(v2.toString().substring(v2.toString().length-1));

		if (v3 == 10) {
			v3 = 0;
		}

		na_wrs_c = na_wrs_c + v3;
	}

	if (!this.gfn_isNull(this.edt_na_wrs_c.value)) {
		idx = "2"
		searchTxt = na_wrs_c;
	} else {
		idx = "1"
		searchTxt = this.edt_wrsnm.value;
	}
	// 설탕관련 값체크 : trnrelParams.in_BsDay
	//거래관계 Set
	trnrelParams.in_BsDay = this.cal_dvy_pla_dt.value;	//1.기준일자
	var params = this.getParamJsonToString(trnrelParams);
	console.log(trnrelParams);
	// trace("거래관계 : " + params);

// 상품 팝업
	//상품명 팝업
// 	var oArg = {
// 					form_id:"VAN_DS_SC_0300", 
// 					odrpl_na_trpl_c:odrpl_na_trpl_c, 
// 					ddly_yn:'1', 
// 					prgr_c:var_prgr_c, 
// 					odrpl_na_team_c:odrpl_na_team_c, 
// 					odrpl_na_trpl_n:this.edt_shrt_bzplnm.value, 
// 					chkDate:chkDate, 
// 					cser_ctr_tpc:var_cser_ctr_tpc, 
// 					trplC:trplC, 
// 					auto:auto, 
// 					idx:idx, 
// 					searchTxt:searchTxt, 
// 					orginTrplS:orginTrplS, 
// 					params:params
// 				};
// 	var sOption = "autosize=true";
// 	var sPopupCallBack = "fn_popupAfter";
// 	this.gfn_openPopup("wrsSearchPop", "SCM.ORDER::VAN_DS_SC_0100_P02.xfdl", oArg, sOption, sPopupCallBack);
}

/* 장애여부확인 */
this.fn_SessionChk = function()
{
	var sSvcID        = "sessionDeliveryNoticeOrder";//통신아이디
	var sURL          = "svc::/rest/scm/delivery/sessionDeliveryNoticeOrder";// 호출할 서버 페이지 주소
	var sInDatasets   = "";//보내는데이터셋
	var sOutDatasets  = "";	//화면에서 받는 데이터셋=보낸이름(1대1 맵핑)
	var sArgument     = "";// 파라미터
	var sCallbackFunc = "fn_callBack";//콜백
	var sTranType     = "S"; // U:저장/삭제, S:조회

	//API 호출
	this.gfn_callService(sSvcID, sURL, sInDatasets, sOutDatasets, sArgument, sCallbackFunc, sTranType);
}]]></Script>
  </Form>
</FDL>
